/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_app";
exports.ids = ["pages/_app"];
exports.modules = {

/***/ "./src/lib/AuthContext.tsx":
/*!*********************************!*\
  !*** ./src/lib/AuthContext.tsx ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuthContext: () => (/* binding */ useAuthContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firebase */ \"./src/lib/firebase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_firebase__WEBPACK_IMPORTED_MODULE_2__]);\n_firebase__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst AuthProvider = ({ children })=>{\n    const { user, loading } = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const login = async (email, password)=>{\n        const result = await (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.loginUser)(email, password);\n        return {\n            success: result.success,\n            error: result.success ? undefined : result.error\n        };\n    };\n    const register = async (email, password, displayName, profileData)=>{\n        const result = await (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.registerUser)(email, password, displayName, profileData);\n        return {\n            success: result.success,\n            error: result.success ? undefined : result.error\n        };\n    };\n    const logout = async ()=>{\n        const result = await (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.logoutUser)();\n        return {\n            success: result.success,\n            error: result.success ? undefined : result.error\n        };\n    };\n    const value = {\n        user,\n        loading,\n        login,\n        register,\n        logout\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"D:\\\\Fitness App\\\\WEB APP\\\\src\\\\lib\\\\AuthContext.tsx\",\n        lineNumber: 50,\n        columnNumber: 10\n    }, undefined);\n};\nconst useAuthContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (context === undefined) {\n        throw new Error(\"useAuthContext must be used within an AuthProvider\");\n    }\n    return context;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL0F1dGhDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvRTtBQUNNO0FBb0IxRSxNQUFNTyw0QkFBY04sb0RBQWFBLENBQThCTztBQUV4RCxNQUFNQyxlQUFrRCxDQUFDLEVBQUVDLFFBQVEsRUFBRTtJQUMxRSxNQUFNLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFLEdBQUdULGtEQUFPQTtJQUVqQyxNQUFNVSxRQUFRLE9BQU9DLE9BQWVDO1FBQ2xDLE1BQU1DLFNBQVMsTUFBTVosb0RBQVNBLENBQUNVLE9BQU9DO1FBQ3RDLE9BQU87WUFBRUUsU0FBU0QsT0FBT0MsT0FBTztZQUFFQyxPQUFPRixPQUFPQyxPQUFPLEdBQUdULFlBQVlRLE9BQU9FLEtBQUs7UUFBQztJQUNyRjtJQUVBLE1BQU1DLFdBQVcsT0FBT0wsT0FBZUMsVUFBa0JLLGFBQXFCQztRQUM1RSxNQUFNTCxTQUFTLE1BQU1YLHVEQUFZQSxDQUFDUyxPQUFPQyxVQUFVSyxhQUFhQztRQUNoRSxPQUFPO1lBQUVKLFNBQVNELE9BQU9DLE9BQU87WUFBRUMsT0FBT0YsT0FBT0MsT0FBTyxHQUFHVCxZQUFZUSxPQUFPRSxLQUFLO1FBQUM7SUFDckY7SUFFQSxNQUFNSSxTQUFTO1FBQ2IsTUFBTU4sU0FBUyxNQUFNVixxREFBVUE7UUFDL0IsT0FBTztZQUFFVyxTQUFTRCxPQUFPQyxPQUFPO1lBQUVDLE9BQU9GLE9BQU9DLE9BQU8sR0FBR1QsWUFBWVEsT0FBT0UsS0FBSztRQUFDO0lBQ3JGO0lBRUEsTUFBTUssUUFBUTtRQUNaWjtRQUNBQztRQUNBQztRQUNBTTtRQUNBRztJQUNGO0lBRUEscUJBQU8sOERBQUNmLFlBQVlpQixRQUFRO1FBQUNELE9BQU9BO2tCQUFRYjs7Ozs7O0FBQzlDLEVBQUU7QUFFSyxNQUFNZSxpQkFBaUI7SUFDNUIsTUFBTUMsVUFBVXhCLGlEQUFVQSxDQUFDSztJQUMzQixJQUFJbUIsWUFBWWxCLFdBQVc7UUFDekIsTUFBTSxJQUFJbUIsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpdG5lc3Mtd2ViLWFwcC8uL3NyYy9saWIvQXV0aENvbnRleHQudHN4PzgwYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQXV0aCwgbG9naW5Vc2VyLCByZWdpc3RlclVzZXIsIGxvZ291dFVzZXIgfSBmcm9tICcuL2ZpcmViYXNlJztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xyXG5cclxuLy8gRGVmaW5lIFVzZXJQcm9maWxlRGF0YSBpbnRlcmZhY2VcclxuaW50ZXJmYWNlIFVzZXJQcm9maWxlRGF0YSB7XHJcbiAgbmlja25hbWU6IHN0cmluZztcclxuICBhZ2U6IG51bWJlcjtcclxuICBnZW5kZXI6IHN0cmluZztcclxuICBoZWlnaHQ6IG51bWJlcjtcclxuICB3ZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEF1dGhDb250ZXh0VHlwZSB7XHJcbiAgdXNlcjogVXNlciB8IG51bGw7XHJcbiAgbG9hZGluZzogYm9vbGVhbjtcclxuICBsb2dpbjogKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PjtcclxuICByZWdpc3RlcjogKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcsIHByb2ZpbGVEYXRhPzogVXNlclByb2ZpbGVEYXRhKSA9PiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT47XHJcbiAgbG9nb3V0OiAoKSA9PiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT47XHJcbn1cclxuXHJcbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XHJcblxyXG5leHBvcnQgY29uc3QgQXV0aFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyLCBsb2FkaW5nIH0gPSB1c2VBdXRoKCk7XHJcblxyXG4gIGNvbnN0IGxvZ2luID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsIGVycm9yOiByZXN1bHQuc3VjY2VzcyA/IHVuZGVmaW5lZCA6IHJlc3VsdC5lcnJvciB9O1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlZ2lzdGVyID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcsIHByb2ZpbGVEYXRhPzogVXNlclByb2ZpbGVEYXRhKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWdpc3RlclVzZXIoZW1haWwsIHBhc3N3b3JkLCBkaXNwbGF5TmFtZSwgcHJvZmlsZURhdGEpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsIGVycm9yOiByZXN1bHQuc3VjY2VzcyA/IHVuZGVmaW5lZCA6IHJlc3VsdC5lcnJvciB9O1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvZ291dFVzZXIoKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLCBlcnJvcjogcmVzdWx0LnN1Y2Nlc3MgPyB1bmRlZmluZWQgOiByZXN1bHQuZXJyb3IgfTtcclxuICB9O1xyXG5cclxuICBjb25zdCB2YWx1ZSA9IHtcclxuICAgIHVzZXIsXHJcbiAgICBsb2FkaW5nLFxyXG4gICAgbG9naW4sXHJcbiAgICByZWdpc3RlcixcclxuICAgIGxvZ291dFxyXG4gIH07XHJcblxyXG4gIHJldHVybiA8QXV0aENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT57Y2hpbGRyZW59PC9BdXRoQ29udGV4dC5Qcm92aWRlcj47XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXNlQXV0aENvbnRleHQgPSAoKTogQXV0aENvbnRleHRUeXBlID0+IHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChBdXRoQ29udGV4dCk7XHJcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VBdXRoQ29udGV4dCBtdXN0IGJlIHVzZWQgd2l0aGluIGFuIEF1dGhQcm92aWRlcicpO1xyXG4gIH1cclxuICByZXR1cm4gY29udGV4dDtcclxufTsgIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VBdXRoIiwibG9naW5Vc2VyIiwicmVnaXN0ZXJVc2VyIiwibG9nb3V0VXNlciIsIkF1dGhDb250ZXh0IiwidW5kZWZpbmVkIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwibG9hZGluZyIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsInJlc3VsdCIsInN1Y2Nlc3MiLCJlcnJvciIsInJlZ2lzdGVyIiwiZGlzcGxheU5hbWUiLCJwcm9maWxlRGF0YSIsImxvZ291dCIsInZhbHVlIiwiUHJvdmlkZXIiLCJ1c2VBdXRoQ29udGV4dCIsImNvbnRleHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lib/AuthContext.tsx\n");

/***/ }),

/***/ "./src/lib/debug/logger.ts":
/*!*********************************!*\
  !*** ./src/lib/debug/logger.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n// A simple logger utility for debugging Firebase operations\nconst isDebug = \"development\" !== \"production\";\nconst logger = {\n    log: (message, data)=>{\n        if (isDebug) {\n            if (data) {\n                console.log(`[NeuralFit] ${message}`, data);\n            } else {\n                console.log(`[NeuralFit] ${message}`);\n            }\n        }\n    },\n    error: (message, error)=>{\n        console.error(`[NeuralFit ERROR] ${message}`, error || \"\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2RlYnVnL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNERBQTREO0FBQzVELE1BQU1BLFVBQVVDLGtCQUF5QjtBQUVsQyxNQUFNQyxTQUFTO0lBQ3BCQyxLQUFLLENBQUNDLFNBQWlCQztRQUNyQixJQUFJTCxTQUFTO1lBQ1gsSUFBSUssTUFBTTtnQkFDUkMsUUFBUUgsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFQyxRQUFRLENBQUMsRUFBRUM7WUFDeEMsT0FBTztnQkFDTEMsUUFBUUgsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFQyxRQUFRLENBQUM7WUFDdEM7UUFDRjtJQUNGO0lBRUFHLE9BQU8sQ0FBQ0gsU0FBaUJHO1FBQ3ZCRCxRQUFRQyxLQUFLLENBQUMsQ0FBQyxrQkFBa0IsRUFBRUgsUUFBUSxDQUFDLEVBQUVHLFNBQVM7SUFDekQ7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZml0bmVzcy13ZWItYXBwLy4vc3JjL2xpYi9kZWJ1Zy9sb2dnZXIudHM/MTdhOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBIHNpbXBsZSBsb2dnZXIgdXRpbGl0eSBmb3IgZGVidWdnaW5nIEZpcmViYXNlIG9wZXJhdGlvbnNcclxuY29uc3QgaXNEZWJ1ZyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7XHJcblxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0ge1xyXG4gIGxvZzogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgaWYgKGlzRGVidWcpIHtcclxuICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW05ldXJhbEZpdF0gJHttZXNzYWdlfWAsIGRhdGEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbTmV1cmFsRml0XSAke21lc3NhZ2V9YCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSkgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgW05ldXJhbEZpdCBFUlJPUl0gJHttZXNzYWdlfWAsIGVycm9yIHx8ICcnKTtcclxuICB9XHJcbn07ICJdLCJuYW1lcyI6WyJpc0RlYnVnIiwicHJvY2VzcyIsImxvZ2dlciIsImxvZyIsIm1lc3NhZ2UiLCJkYXRhIiwiY29uc29sZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/debug/logger.ts\n");

/***/ }),

/***/ "./src/lib/firebase.ts":
/*!*****************************!*\
  !*** ./src/lib/firebase.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   calculateCaloriesBurned: () => (/* binding */ calculateCaloriesBurned),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   getUserWorkouts: () => (/* binding */ getUserWorkouts),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser),\n/* harmony export */   registerUser: () => (/* binding */ registerUser),\n/* harmony export */   saveUserProfile: () => (/* binding */ saveUserProfile),\n/* harmony export */   saveWorkoutToFirestore: () => (/* binding */ saveWorkoutToFirestore),\n/* harmony export */   updateFitnessLevel: () => (/* binding */ updateFitnessLevel),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./debug/logger */ \"./src/lib/debug/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// Helper functions for calorie calculations\nfunction calculateBMR(weight, height, age, gender) {\n    // Mifflin-St Jeor Equation\n    if (gender.toLowerCase() === \"male\") {\n        return 10 * weight + 6.25 * height - 5 * age + 5;\n    } else {\n        return 10 * weight + 6.25 * height - 5 * age - 161;\n    }\n}\nfunction getAverageBMR(gender) {\n    // Average BMR values based on gender\n    return gender.toLowerCase() === \"male\" ? 1600 : 1400;\n}\nfunction calculatePersonalizedCalorieFactor(profile) {\n    // Calculate BMR using Mifflin-St Jeor\n    const bmr = calculateBMR(profile.weight, profile.height, profile.age, profile.gender);\n    // Base factor from BMR (normalized around average BMR)\n    const baseBMRFactor = bmr / getAverageBMR(profile.gender);\n    // Age factor (gradually reduces with age)\n    const ageFactor = Math.max(0.85, 1 - (profile.age - 30) * 0.003);\n    // BMI adjustment\n    const bmi = profile.weight / Math.pow(profile.height / 100, 2);\n    const bmiAdjustment = 1 + (bmi - 22) * 0.01;\n    // Fitness level factor (starts at 1.0, adjusts over time)\n    const fitnessLevelFactor = 1 + (profile.fitnessLevel || 0) * 0.02;\n    return baseBMRFactor * ageFactor * bmiAdjustment * fitnessLevelFactor;\n}\n// Update fitness level after completing a workout\nconst updateFitnessLevel = async (userId, currentFitnessLevel = 0)=>{\n    try {\n        const fitnessLevelIncrease = 0.1; // Small increment per workout\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"userProfiles\", userId), {\n            fitnessLevel: Math.min(10, currentFitnessLevel + fitnessLevelIncrease),\n            lastUpdate: new Date().toISOString()\n        });\n        return {\n            success: true\n        };\n    } catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to update fitness level\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Your Firebase configuration\n// Replace these values with your own Firebase project configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBDNoAH0YumicJHPKMYsMduo5ZpfUXH8Xg\",\n    authDomain: \"webapp-1522.firebaseapp.com\",\n    databaseURL: \"https://webapp-1522-default-rtdb.firebaseio.com\",\n    projectId: \"webapp-1522\",\n    storageBucket: \"webapp-1522.firebasestorage.app\",\n    messagingSenderId: \"965223887227\",\n    appId: \"1:965223887227:web:e0ba99340c7dcb4a724dde\",\n    measurementId: \"G-E75YNZKC65\"\n};\n// Initialize Firebase\n_debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"Initializing Firebase...\");\n// Check if Firebase app is already initialized to prevent multiple instances\n// This is particularly important in Next.js which can cause multiple initializations\nlet app;\ntry {\n    const apps = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)();\n    if (apps.length === 0) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"No Firebase app instance found, initializing a new one\");\n        app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n    } else {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"Firebase app already initialized, reusing existing instance\");\n        app = apps[0];\n    }\n} catch (error) {\n    _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Error during Firebase initialization:\", error);\n    // Fall back to normal initialization\n    app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n}\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n_debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"Firebase initialized\", {\n    authInitialized: !!auth,\n    dbInitialized: !!db\n});\n// Auth functions\nconst registerUser = async (email, password, displayName, profileData)=>{\n    try {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(`Registering user with email: ${email}`);\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.createUserWithEmailAndPassword)(auth, email, password);\n        const user = userCredential.user;\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(`User registered successfully with UID: ${user.uid}`);\n        try {\n            // Create user document\n            _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(`Creating user document in Firestore for UID: ${user.uid}`);\n            const userData = {\n                email,\n                displayName,\n                createdAt: new Date().toISOString(),\n                workouts: [],\n                calorieMultiplier: 1.0,\n                fitnessLevel: 0,\n                lastCalorieFactorUpdate: new Date().toISOString()\n            };\n            // Create user profile with provided data or defaults\n            const userProfileData = profileData ? {\n                ...profileData,\n                updatedAt: new Date().toISOString(),\n                calorieMultiplier: 1.0,\n                fitnessLevel: 0,\n                lastCalorieFactorUpdate: new Date().toISOString()\n            } : {\n                nickname: displayName,\n                age: 30,\n                gender: \"prefer-not-to-say\",\n                height: 170,\n                weight: 70,\n                updatedAt: new Date().toISOString(),\n                calorieMultiplier: 1.0,\n                fitnessLevel: 0,\n                lastCalorieFactorUpdate: new Date().toISOString()\n            };\n            // If profile data is provided, calculate personalized calorie factor\n            if (profileData) {\n                userProfileData.calorieMultiplier = calculatePersonalizedCalorieFactor({\n                    ...userProfileData,\n                    updatedAt: new Date().toISOString()\n                });\n            }\n            // Save both documents\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"users\", user.uid);\n            const userProfileRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"userProfiles\", user.uid);\n            await Promise.all([\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, userData),\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userProfileRef, userProfileData)\n            ]);\n            _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"User documents created successfully\");\n            return {\n                success: true,\n                user\n            };\n        } catch (firestoreError) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to create user documents in Firestore\", firestoreError);\n            // Still return success since the user was created in Authentication\n            return {\n                success: true,\n                user,\n                warning: \"User registered but profile data could not be saved. Please update your profile.\"\n            };\n        }\n    } catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Registration failed\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\nconst loginUser = async (email, password)=>{\n    try {\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.signInWithEmailAndPassword)(auth, email, password);\n        return {\n            success: true,\n            user: userCredential.user\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\nconst logoutUser = async ()=>{\n    try {\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.signOut)(auth);\n        return {\n            success: true\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// User profile functions\nconst saveUserProfile = async (userId, profileData)=>{\n    try {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(`Saving user profile for UID: ${userId}`);\n        const userProfileRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"userProfiles\", userId);\n        // Calculate the personalized calorie factor\n        const calorieMultiplier = calculatePersonalizedCalorieFactor({\n            ...profileData,\n            updatedAt: new Date().toISOString(),\n            fitnessLevel: 0\n        });\n        const data = {\n            ...profileData,\n            updatedAt: new Date().toISOString(),\n            calorieMultiplier,\n            fitnessLevel: 0,\n            lastCalorieFactorUpdate: new Date().toISOString()\n        };\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userProfileRef, data, {\n            merge: true\n        });\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"User profile saved successfully\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to save user profile\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\nconst getUserProfile = async (userId)=>{\n    try {\n        const profileDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"userProfiles\", userId));\n        if (profileDoc.exists()) {\n            return {\n                success: true,\n                profile: profileDoc.data()\n            };\n        } else {\n            return {\n                success: false,\n                error: \"Profile not found\",\n                profile: null\n            };\n        }\n    } catch (error) {\n        console.error(\"Error getting user profile:\", error);\n        return {\n            success: false,\n            error: error.message,\n            profile: null\n        };\n    }\n};\nconst updateUserProfile = async (userId, profileUpdates)=>{\n    try {\n        const userProfileRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"userProfiles\", userId);\n        const userProfileDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userProfileRef);\n        if (userProfileDoc.exists()) {\n            const userProfile = userProfileDoc.data();\n            const updatedProfile = {\n                ...userProfile,\n                ...profileUpdates,\n                updatedAt: new Date().toISOString()\n            };\n            // Recalculate calorie multiplier when profile changes\n            updatedProfile.calorieMultiplier = calculatePersonalizedCalorieFactor(updatedProfile);\n            updatedProfile.lastCalorieFactorUpdate = new Date().toISOString();\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userProfileRef, updatedProfile);\n            _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.log(\"User profile updated successfully\");\n            return {\n                success: true\n            };\n        } else {\n            throw new Error(\"User profile not found\");\n        }\n    } catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to update user profile\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Custom hook for auth state\nconst useAuth = ()=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.onAuthStateChanged)(auth, (currentUser)=>{\n            setUser(currentUser);\n            setLoading(false);\n        });\n        return unsubscribe;\n    }, []);\n    return {\n        user,\n        loading\n    };\n};\n// Firestore functions for workout data\nconst saveWorkoutToFirestore = async (userId, date, results, summaryData)=>{\n    try {\n        console.log(\"[Firebase] Starting to save workout to Firestore for user:\", userId);\n        console.log(\"[Firebase] Workout data:\", {\n            date,\n            resultsCount: results.length,\n            summaryData\n        });\n        // Validate inputs\n        if (!userId) throw new Error(\"User ID is required\");\n        if (!date) throw new Error(\"Date is required\");\n        if (!results || !Array.isArray(results)) throw new Error(\"Results must be an array\");\n        if (results.length === 0) throw new Error(\"Results array cannot be empty\");\n        // Check if Firebase is properly initialized\n        if (!db) {\n            console.error(\"[Firebase] Firestore not initialized!\");\n            throw new Error(\"Firebase database not initialized\");\n        }\n        // Test database connectivity\n        try {\n            console.log(\"[Firebase] Testing database connectivity...\");\n            const testRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"connectionTest\", \"test\");\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(testRef, {\n                timestamp: new Date().toISOString()\n            }, {\n                merge: true\n            });\n            console.log(\"[Firebase] Database connection successful\");\n        } catch (connError) {\n            console.error(\"[Firebase] Database connection test failed:\", connError);\n            throw new Error(`Database connection failed: ${connError.message}`);\n        }\n        // Get user profile to apply calorie multiplier\n        console.log(\"[Firebase] Fetching user profile...\");\n        const profileResult = await getUserProfile(userId);\n        console.log(\"[Firebase] User profile fetch result:\", profileResult.success);\n        const calorieMultiplier = profileResult.success && profileResult.profile ? profileResult.profile.calorieMultiplier || 1.0 : 1.0;\n        console.log(\"[Firebase] Using calorie multiplier:\", calorieMultiplier);\n        // Apply calorie multiplier to each exercise result\n        console.log(\"[Firebase] Applying calorie multiplier to results\");\n        const resultsWithCalories = results.map((result)=>{\n            if (result.caloriesBurned) {\n                return {\n                    ...result,\n                    caloriesBurned: Math.round(result.caloriesBurned * calorieMultiplier)\n                };\n            }\n            return result;\n        });\n        // Generate a unique workout ID if not provided\n        const workoutId = summaryData?.workoutId || `${date}-${Date.now()}`;\n        console.log(\"[Firebase] Using workout ID:\", workoutId);\n        // Prepare the workout data with optional summary\n        const workoutData = {\n            date,\n            workoutId,\n            results: resultsWithCalories,\n            lastUpdated: new Date().toISOString()\n        };\n        // Add summary data if provided\n        if (summaryData) {\n            workoutData.summary = {\n                totalCaloriesBurned: Math.round(summaryData.totalCaloriesBurned * calorieMultiplier),\n                durationSeconds: summaryData.durationSeconds,\n                durationFormatted: formatDuration(summaryData.durationSeconds)\n            };\n        }\n        // Try a different approach - write directly to a workout collection\n        try {\n            console.log(\"[Firebase] Trying direct workout save approach...\");\n            // Create a workout document in a workouts collection\n            const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"workouts\", workoutId);\n            const fullWorkoutData = {\n                ...workoutData,\n                userId,\n                createdAt: new Date().toISOString()\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(workoutRef, fullWorkoutData);\n            console.log(\"[Firebase] Successfully saved workout directly to workouts collection\");\n            // Also create a user-workouts reference\n            const userWorkoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, `users/${userId}/workouts`, workoutId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userWorkoutRef, fullWorkoutData);\n            console.log(\"[Firebase] Successfully saved workout to user workouts subcollection\");\n            // Update the user's fitness level\n            if (profileResult.success && profileResult.profile) {\n                try {\n                    console.log(\"[Firebase] Updating fitness level\");\n                    await updateFitnessLevel(userId, profileResult.profile.fitnessLevel || 0);\n                    console.log(\"[Firebase] Fitness level updated\");\n                } catch (fitnessError) {\n                    console.warn(\"[Firebase] Error updating fitness level (non-critical):\", fitnessError);\n                }\n            }\n            return {\n                success: true,\n                workoutId\n            };\n        } catch (directSaveError) {\n            console.error(\"[Firebase] Direct save failed, falling back to user document update:\", directSaveError);\n        // Continue to the original approach below\n        }\n        console.log(\"[Firebase] Getting user document...\");\n        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"users\", userId);\n        // Retry mechanism for Firestore operations\n        let retries = 0;\n        const maxRetries = 3;\n        let userDoc;\n        while(retries < maxRetries){\n            try {\n                userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n                break;\n            } catch (error) {\n                retries++;\n                console.warn(`[Firebase] Error getting user document (attempt ${retries}/${maxRetries}):`, error);\n                if (retries >= maxRetries) throw error;\n                // Wait before retrying\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n            }\n        }\n        if (!userDoc || !userDoc.exists()) {\n            console.error(\"[Firebase] User document not found for ID:\", userId);\n            // As a fallback, try to create the document if it doesn't exist\n            try {\n                console.log(\"[Firebase] Attempting to create user document as fallback\");\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(userRef, {\n                    workouts: [\n                        workoutData\n                    ],\n                    createdAt: new Date().toISOString(),\n                    updatedAt: new Date().toISOString()\n                });\n                console.log(\"[Firebase] Successfully created user document with workout data\");\n                return {\n                    success: true,\n                    workoutId\n                };\n            } catch (createError) {\n                console.error(\"[Firebase] Failed to create fallback user document:\", createError);\n                throw new Error(\"User document not found and could not be created\");\n            }\n        }\n        console.log(\"[Firebase] User document exists, proceeding to update\");\n        const userData = userDoc.data();\n        const workouts = userData.workouts || [];\n        // Check if workout for this date exists\n        const existingWorkoutIndex = workouts.findIndex((w)=>w.workoutId === workoutId);\n        if (existingWorkoutIndex !== -1) {\n            // Update existing workout\n            console.log(\"[Firebase] Updating existing workout with ID:\", workoutId);\n            workouts[existingWorkoutIndex] = workoutData;\n        } else {\n            // Add new workout\n            console.log(\"[Firebase] Adding new workout with ID:\", workoutId);\n            workouts.push(workoutData);\n        }\n        try {\n            // Update user document\n            console.log(\"[Firebase] Updating user document with workout data...\");\n            // Use a transaction to ensure atomic updates\n            retries = 0;\n            while(retries < maxRetries){\n                try {\n                    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(userRef, {\n                        workouts,\n                        lastUpdated: new Date().toISOString()\n                    });\n                    console.log(\"[Firebase] User document updated successfully\");\n                    break;\n                } catch (updateError) {\n                    retries++;\n                    console.warn(`[Firebase] Error updating user document (attempt ${retries}/${maxRetries}):`, updateError);\n                    if (retries >= maxRetries) throw updateError;\n                    await new Promise((resolve)=>setTimeout(resolve, 1000));\n                }\n            }\n            // Update user's fitness level\n            if (profileResult.success && profileResult.profile) {\n                console.log(\"[Firebase] Updating fitness level\");\n                try {\n                    await updateFitnessLevel(userId, profileResult.profile.fitnessLevel || 0);\n                    console.log(\"[Firebase] Fitness level updated\");\n                } catch (fitnessError) {\n                    console.warn(\"[Firebase] Error updating fitness level (non-critical):\", fitnessError);\n                }\n            }\n            // Verify the update was successful by reading back the data\n            const verifyDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            if (verifyDoc.exists()) {\n                const verifyData = verifyDoc.data();\n                if (verifyData.workouts && verifyData.workouts.length > 0) {\n                    console.log(\"[Firebase] Verified workout data was saved successfully\");\n                    return {\n                        success: true,\n                        workoutId\n                    };\n                } else {\n                    console.warn(\"[Firebase] Workout data might not have been saved correctly\");\n                    return {\n                        success: true,\n                        warning: \"Data might not have been saved correctly\",\n                        workoutId\n                    };\n                }\n            }\n            return {\n                success: true,\n                workoutId\n            };\n        } catch (updateError) {\n            console.error(\"[Firebase] Error updating user document:\", updateError);\n            return {\n                success: false,\n                error: `Failed to update user document: ${updateError.message}`\n            };\n        }\n    } catch (error) {\n        console.error(\"[Firebase] Error saving workout:\", error);\n        // Try to save to localStorage as fallback\n        try {\n            console.log(\"[Firebase] Attempting to save to localStorage as fallback\");\n            const workoutData = {\n                userId,\n                date,\n                results,\n                summaryData,\n                timestamp: new Date().toISOString()\n            };\n            // Get existing backup data or initialize\n            const existing = localStorage.getItem(\"workoutBackup\") || \"[]\";\n            const backupData = JSON.parse(existing);\n            backupData.push(workoutData);\n            // Save back to localStorage\n            localStorage.setItem(\"workoutBackup\", JSON.stringify(backupData));\n            console.log(\"[Firebase] Workout data saved to localStorage as backup\");\n            return {\n                success: false,\n                error: `${error.message} (But data was backed up locally)`,\n                fallbackUsed: true\n            };\n        } catch (fallbackError) {\n            console.error(\"[Firebase] Failed to save fallback data:\", fallbackError);\n            return {\n                success: false,\n                error: error.message\n            };\n        }\n    }\n};\n// Helper function to format duration in seconds to readable format\nfunction formatDuration(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}m ${remainingSeconds}s`;\n}\nconst getUserWorkouts = async (userId)=>{\n    try {\n        console.log(\"[Firebase] Getting workouts for user:\", userId);\n        if (!userId) {\n            console.error(\"[Firebase] getUserWorkouts called with empty userId\");\n            return {\n                success: false,\n                error: \"User ID is required\",\n                workouts: []\n            };\n        }\n        if (!db) {\n            console.error(\"[Firebase] Firestore not initialized in getUserWorkouts\");\n            return {\n                success: false,\n                error: \"Firebase not initialized\",\n                workouts: []\n            };\n        }\n        // Try multiple approaches to get the workout data\n        let allWorkouts = [];\n        let errors = [];\n        // Approach 1: Check direct workouts collection\n        try {\n            console.log(\"[Firebase] Checking workouts collection...\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"workouts\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n            const workoutsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            if (!workoutsSnapshot.empty) {\n                const directWorkouts = workoutsSnapshot.docs.map((doc)=>doc.data());\n                console.log(`[Firebase] Found ${directWorkouts.length} workouts in workouts collection`);\n                allWorkouts = [\n                    ...allWorkouts,\n                    ...directWorkouts\n                ];\n            } else {\n                console.log(\"[Firebase] No workouts found in workouts collection\");\n            }\n        } catch (directError) {\n            console.error(\"[Firebase] Error fetching from workouts collection:\", directError);\n            errors.push(`Error fetching from workouts collection: ${directError.message}`);\n        }\n        // Approach 2: Check user-workouts subcollection\n        try {\n            console.log(\"[Firebase] Checking user workouts subcollection...\");\n            const userWorkoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, `users/${userId}/workouts`);\n            const userWorkoutsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(userWorkoutsRef);\n            if (!userWorkoutsSnapshot.empty) {\n                const subcollectionWorkouts = userWorkoutsSnapshot.docs.map((doc)=>doc.data());\n                console.log(`[Firebase] Found ${subcollectionWorkouts.length} workouts in user subcollection`);\n                // Filter out any duplicates (by workoutId) that might already be in allWorkouts\n                const newWorkouts = subcollectionWorkouts.filter((newWorkout)=>!allWorkouts.some((existing)=>existing.workoutId === newWorkout.workoutId));\n                allWorkouts = [\n                    ...allWorkouts,\n                    ...newWorkouts\n                ];\n            } else {\n                console.log(\"[Firebase] No workouts found in user subcollection\");\n            }\n        } catch (subcollectionError) {\n            console.error(\"[Firebase] Error fetching from user workouts subcollection:\", subcollectionError);\n            errors.push(`Error fetching from user workouts subcollection: ${subcollectionError.message}`);\n        }\n        // Approach 3: Check the original storage location (user document's workouts array)\n        try {\n            console.log(\"[Firebase] Checking user document for workouts array...\");\n            const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"users\", userId);\n            const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(userRef);\n            if (userDoc.exists()) {\n                const userData = userDoc.data();\n                if (userData.workouts && Array.isArray(userData.workouts) && userData.workouts.length > 0) {\n                    console.log(`[Firebase] Found ${userData.workouts.length} workouts in user document`);\n                    // Filter out any duplicates by workoutId if it exists, otherwise by date\n                    const newWorkouts = userData.workouts.filter((newWorkout)=>{\n                        if (newWorkout.workoutId) {\n                            return !allWorkouts.some((existing)=>existing.workoutId === newWorkout.workoutId);\n                        } else {\n                            return !allWorkouts.some((existing)=>existing.date === newWorkout.date);\n                        }\n                    });\n                    allWorkouts = [\n                        ...allWorkouts,\n                        ...newWorkouts\n                    ];\n                } else {\n                    console.log(\"[Firebase] No workouts found in user document\");\n                }\n            } else {\n                console.log(\"[Firebase] User document not found, skipping workouts array check\");\n            }\n        } catch (userDocError) {\n            console.error(\"[Firebase] Error fetching from user document:\", userDocError);\n            errors.push(`Error fetching from user document: ${userDocError.message}`);\n        }\n        // Return results\n        console.log(`[Firebase] Total workouts found across all locations: ${allWorkouts.length}`);\n        if (allWorkouts.length === 0 && errors.length > 0) {\n            // If we found no workouts and had errors, try checking localStorage backup\n            console.log(\"[Firebase] No workouts found in Firestore, checking backup in localStorage\");\n            try {\n                const workoutBackups = localStorage.getItem(\"workoutBackups\");\n                if (workoutBackups) {\n                    const backupData = JSON.parse(workoutBackups);\n                    const userBackups = backupData.filter((workout)=>{\n                        return workout.userId === userId || workout.results && workout.results.length > 0;\n                    });\n                    if (userBackups.length > 0) {\n                        console.log(`[Firebase] Found ${userBackups.length} workouts in localStorage backup`);\n                        return {\n                            success: true,\n                            workouts: userBackups,\n                            warnings: [\n                                \"Using workout data from localStorage backup\",\n                                ...errors\n                            ]\n                        };\n                    }\n                }\n            } catch (backupError) {\n                console.error(\"[Firebase] Error checking localStorage backup:\", backupError);\n            }\n            return {\n                success: false,\n                error: \"Failed to retrieve workouts from all sources\",\n                details: errors,\n                workouts: []\n            };\n        }\n        // Sort workouts by date (newest first)\n        const sortedWorkouts = [\n            ...allWorkouts\n        ].sort((a, b)=>{\n            // If timestamp exists, use it for most accurate sorting\n            if (a.createdAt && b.createdAt) {\n                return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n            }\n            // Otherwise fall back to date\n            return new Date(b.date).getTime() - new Date(a.date).getTime();\n        });\n        // Log the dates of the workouts to help debug\n        if (sortedWorkouts.length > 0) {\n            console.log(\"[Firebase] Workout dates:\", sortedWorkouts.map((w)=>w.date).join(\", \"));\n        }\n        return {\n            success: true,\n            workouts: sortedWorkouts,\n            warnings: errors.length > 0 ? errors : undefined\n        };\n    } catch (error) {\n        console.error(\"[Firebase] Error getting workouts:\", error);\n        // Try to check for backup data in localStorage\n        try {\n            const backupData = localStorage.getItem(\"workoutBackup\");\n            if (backupData) {\n                const parsedBackup = JSON.parse(backupData);\n                const userBackups = parsedBackup.filter((item)=>item.userId === userId);\n                if (userBackups.length > 0) {\n                    console.log(\"[Firebase] Found backup workout data in localStorage:\", userBackups.length);\n                    return {\n                        success: true,\n                        workouts: userBackups.map((item)=>({\n                                date: item.date,\n                                results: item.results,\n                                summary: item.summaryData\n                            })),\n                        usingBackup: true\n                    };\n                }\n            }\n            // Also check the other backup format\n            const workoutBackups = localStorage.getItem(\"workoutBackups\");\n            if (workoutBackups) {\n                const parsedWorkoutBackups = JSON.parse(workoutBackups);\n                if (parsedWorkoutBackups.length > 0) {\n                    console.log(\"[Firebase] Found backup workout data in workoutBackups:\", parsedWorkoutBackups.length);\n                    return {\n                        success: true,\n                        workouts: parsedWorkoutBackups,\n                        usingBackup: true\n                    };\n                }\n            }\n        } catch (backupError) {\n            console.error(\"[Firebase] Error checking backup data:\", backupError);\n        }\n        return {\n            success: false,\n            error: error.message,\n            workouts: []\n        };\n    }\n};\n// Function to calculate calories burned based on exercise type, rep count, and user weight\nconst calculateCaloriesBurned = (exerciseType, reps, userWeight)=>{\n    if (exerciseType === \"workout_end\" || exerciseType === \"workout-end\") {\n        return 0; // No calories for workout end marker\n    }\n    // Base calories per rep for a person weighing 70kg\n    const caloriesPerRepBase = {\n        \"burpees\": 0.5,\n        \"squats\": 0.32,\n        \"high_knees\": 0.2,\n        \"mountain_climbers\": 0.25,\n        \"jumping_jacks\": 0.2\n    };\n    // Default to squats if exercise type not found\n    const caloriesPerRep = caloriesPerRepBase[exerciseType] || caloriesPerRepBase[\"squats\"];\n    // Adjust based on weight (simplified linear adjustment)\n    const weightFactor = userWeight / 70;\n    // Calculate total calories and round to 1 decimal place\n    return Math.round(caloriesPerRep * reps * weightFactor * 10) / 10;\n};\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2ZpcmViYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFDMEY7QUFDbEI7QUFDekU7QUFDSjtBQUNEO0FBZXZDLDRDQUE0QztBQUM1QyxTQUFTbUIsYUFBYUMsTUFBYyxFQUFFQyxNQUFjLEVBQUVDLEdBQVcsRUFBRUMsTUFBYztJQUMvRSwyQkFBMkI7SUFDM0IsSUFBSUEsT0FBT0MsV0FBVyxPQUFPLFFBQVE7UUFDbkMsT0FBTyxLQUFNSixTQUFXLE9BQU9DLFNBQVcsSUFBSUMsTUFBTztJQUN2RCxPQUFPO1FBQ0wsT0FBTyxLQUFNRixTQUFXLE9BQU9DLFNBQVcsSUFBSUMsTUFBTztJQUN2RDtBQUNGO0FBRUEsU0FBU0csY0FBY0YsTUFBYztJQUNuQyxxQ0FBcUM7SUFDckMsT0FBT0EsT0FBT0MsV0FBVyxPQUFPLFNBQVMsT0FBTztBQUNsRDtBQUVBLFNBQVNFLG1DQUFtQ0MsT0FBb0I7SUFDOUQsc0NBQXNDO0lBQ3RDLE1BQU1DLE1BQU1ULGFBQWFRLFFBQVFQLE1BQU0sRUFBRU8sUUFBUU4sTUFBTSxFQUFFTSxRQUFRTCxHQUFHLEVBQUVLLFFBQVFKLE1BQU07SUFFcEYsdURBQXVEO0lBQ3ZELE1BQU1NLGdCQUFnQkQsTUFBTUgsY0FBY0UsUUFBUUosTUFBTTtJQUV4RCwwQ0FBMEM7SUFDMUMsTUFBTU8sWUFBWUMsS0FBS0MsR0FBRyxDQUFDLE1BQU0sSUFBSyxDQUFDTCxRQUFRTCxHQUFHLEdBQUcsRUFBQyxJQUFLO0lBRTNELGlCQUFpQjtJQUNqQixNQUFNVyxNQUFNTixRQUFRUCxNQUFNLEdBQUdXLEtBQUtHLEdBQUcsQ0FBQ1AsUUFBUU4sTUFBTSxHQUFDLEtBQUs7SUFDMUQsTUFBTWMsZ0JBQWdCLElBQUssQ0FBQ0YsTUFBTSxFQUFDLElBQUs7SUFFeEMsMERBQTBEO0lBQzFELE1BQU1HLHFCQUFxQixJQUFJLENBQUNULFFBQVFVLFlBQVksSUFBSSxLQUFLO0lBRTdELE9BQU9SLGdCQUFnQkMsWUFBWUssZ0JBQWdCQztBQUNyRDtBQUVBLGtEQUFrRDtBQUMzQyxNQUFNRSxxQkFBcUIsT0FBT0MsUUFBZ0JDLHNCQUE4QixDQUFDO0lBQ3RGLElBQUk7UUFDRixNQUFNQyx1QkFBdUIsS0FBSyw4QkFBOEI7UUFDaEUsTUFBTTlCLDZEQUFTQSxDQUFDSCx1REFBR0EsQ0FBQ2tDLElBQUksZ0JBQWdCSCxTQUFTO1lBQy9DRixjQUFjTixLQUFLWSxHQUFHLENBQUMsSUFBSUgsc0JBQXNCQztZQUNqREcsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3BDO1FBQ0EsT0FBTztZQUFFQyxTQUFTO1FBQUs7SUFDekIsRUFBRSxPQUFPQyxPQUFZO1FBQ25CL0IsaURBQU1BLENBQUMrQixLQUFLLENBQUMsa0NBQWtDQTtRQUMvQyxPQUFPO1lBQUVELFNBQVM7WUFBT0MsT0FBT0EsTUFBTUMsT0FBTztRQUFDO0lBQ2hEO0FBQ0YsRUFBRTtBQUVGLDhCQUE4QjtBQUM5QixvRUFBb0U7QUFDcEUsTUFBTUMsaUJBQWlCO0lBQ3JCQyxRQUFRO0lBQ1JDLFlBQVk7SUFDWkMsYUFBYTtJQUNiQyxXQUFXO0lBQ1hDLGVBQWU7SUFDZkMsbUJBQW1CO0lBQ25CQyxPQUFPO0lBQ1BDLGVBQWU7QUFDakI7QUFFQSxzQkFBc0I7QUFDdEJ6QyxpREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQztBQUVYLDZFQUE2RTtBQUM3RSxxRkFBcUY7QUFDckYsSUFBSUM7QUFDSixJQUFJO0lBQ0YsTUFBTUMsT0FBTzNDLHFEQUFPQTtJQUVwQixJQUFJMkMsS0FBS0MsTUFBTSxLQUFLLEdBQUc7UUFDckI3QyxpREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQztRQUNYQyxNQUFNNUQsMkRBQWFBLENBQUNrRDtJQUN0QixPQUFPO1FBQ0xqQyxpREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQztRQUNYQyxNQUFNQyxJQUFJLENBQUMsRUFBRTtJQUNmO0FBQ0YsRUFBRSxPQUFPYixPQUFPO0lBQ2QvQixpREFBTUEsQ0FBQytCLEtBQUssQ0FBQyx5Q0FBeUNBO0lBQ3RELHFDQUFxQztJQUNyQ1ksTUFBTTVELDJEQUFhQSxDQUFDa0Q7QUFDdEI7QUFFQSxNQUFNYSxPQUFPOUQsc0RBQU9BLENBQUMyRDtBQUNyQixNQUFNbEIsS0FBS3BDLGdFQUFZQSxDQUFDc0Q7QUFDeEIzQyxpREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQyx3QkFBd0I7SUFBRUssaUJBQWlCLENBQUMsQ0FBQ0Q7SUFBTUUsZUFBZSxDQUFDLENBQUN2QjtBQUFHO0FBRWxGLGlCQUFpQjtBQUNWLE1BQU13QixlQUFlLE9BQzFCQyxPQUNBQyxVQUNBQyxhQUNBQztJQVFBLElBQUk7UUFDRnJELGlEQUFNQSxDQUFDMEMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUVRLE1BQU0sQ0FBQztRQUNsRCxNQUFNSSxpQkFBaUIsTUFBTXJFLDZFQUE4QkEsQ0FBQzZELE1BQU1JLE9BQU9DO1FBQ3pFLE1BQU1JLE9BQU9ELGVBQWVDLElBQUk7UUFDaEN2RCxpREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFYSxLQUFLQyxHQUFHLENBQUMsQ0FBQztRQUUvRCxJQUFJO1lBQ0YsdUJBQXVCO1lBQ3ZCeEQsaURBQU1BLENBQUMwQyxHQUFHLENBQUMsQ0FBQyw2Q0FBNkMsRUFBRWEsS0FBS0MsR0FBRyxDQUFDLENBQUM7WUFDckUsTUFBTUMsV0FBVztnQkFDZlA7Z0JBQ0FFO2dCQUNBTSxXQUFXLElBQUk5QixPQUFPQyxXQUFXO2dCQUNqQzhCLFVBQVUsRUFBRTtnQkFDWkMsbUJBQW1CO2dCQUNuQnhDLGNBQWM7Z0JBQ2R5Qyx5QkFBeUIsSUFBSWpDLE9BQU9DLFdBQVc7WUFDakQ7WUFFQSxxREFBcUQ7WUFDckQsTUFBTWlDLGtCQUFrQlQsY0FBYztnQkFDcEMsR0FBR0EsV0FBVztnQkFDZFUsV0FBVyxJQUFJbkMsT0FBT0MsV0FBVztnQkFDakMrQixtQkFBbUI7Z0JBQ25CeEMsY0FBYztnQkFDZHlDLHlCQUF5QixJQUFJakMsT0FBT0MsV0FBVztZQUNqRCxJQUFJO2dCQUNGbUMsVUFBVVo7Z0JBQ1YvQyxLQUFLO2dCQUNMQyxRQUFRO2dCQUNSRixRQUFRO2dCQUNSRCxRQUFRO2dCQUNSNEQsV0FBVyxJQUFJbkMsT0FBT0MsV0FBVztnQkFDakMrQixtQkFBbUI7Z0JBQ25CeEMsY0FBYztnQkFDZHlDLHlCQUF5QixJQUFJakMsT0FBT0MsV0FBVztZQUNqRDtZQUVBLHFFQUFxRTtZQUNyRSxJQUFJd0IsYUFBYTtnQkFDZlMsZ0JBQWdCRixpQkFBaUIsR0FBR25ELG1DQUFtQztvQkFDckUsR0FBR3FELGVBQWU7b0JBQ2xCQyxXQUFXLElBQUluQyxPQUFPQyxXQUFXO2dCQUNuQztZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1vQyxVQUFVMUUsdURBQUdBLENBQUNrQyxJQUFJLFNBQVM4QixLQUFLQyxHQUFHO1lBQ3pDLE1BQU1VLGlCQUFpQjNFLHVEQUFHQSxDQUFDa0MsSUFBSSxnQkFBZ0I4QixLQUFLQyxHQUFHO1lBRXZELE1BQU1XLFFBQVFDLEdBQUcsQ0FBQztnQkFDaEI1RSwwREFBTUEsQ0FBQ3lFLFNBQVNSO2dCQUNoQmpFLDBEQUFNQSxDQUFDMEUsZ0JBQWdCSjthQUN4QjtZQUVEOUQsaURBQU1BLENBQUMwQyxHQUFHLENBQUM7WUFFWCxPQUFPO2dCQUFFWixTQUFTO2dCQUFNeUI7WUFBSztRQUMvQixFQUFFLE9BQU9jLGdCQUFxQjtZQUM1QnJFLGlEQUFNQSxDQUFDK0IsS0FBSyxDQUFDLGdEQUFnRHNDO1lBRTdELG9FQUFvRTtZQUNwRSxPQUFPO2dCQUNMdkMsU0FBUztnQkFDVHlCO2dCQUNBZSxTQUFTO1lBQ1g7UUFDRjtJQUNGLEVBQUUsT0FBT3ZDLE9BQVk7UUFDbkIvQixpREFBTUEsQ0FBQytCLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3BDLE9BQU87WUFBRUQsU0FBUztZQUFPQyxPQUFPQSxNQUFNQyxPQUFPO1FBQUM7SUFDaEQ7QUFDRixFQUFFO0FBRUssTUFBTXVDLFlBQVksT0FBT3JCLE9BQWVDO0lBQzdDLElBQUk7UUFDRixNQUFNRyxpQkFBaUIsTUFBTXBFLHlFQUEwQkEsQ0FBQzRELE1BQU1JLE9BQU9DO1FBQ3JFLE9BQU87WUFBRXJCLFNBQVM7WUFBTXlCLE1BQU1ELGVBQWVDLElBQUk7UUFBQztJQUNwRCxFQUFFLE9BQU94QixPQUFZO1FBQ25CLE9BQU87WUFBRUQsU0FBUztZQUFPQyxPQUFPQSxNQUFNQyxPQUFPO1FBQUM7SUFDaEQ7QUFDRixFQUFFO0FBRUssTUFBTXdDLGFBQWE7SUFDeEIsSUFBSTtRQUNGLE1BQU1yRixzREFBT0EsQ0FBQzJEO1FBQ2QsT0FBTztZQUFFaEIsU0FBUztRQUFLO0lBQ3pCLEVBQUUsT0FBT0MsT0FBWTtRQUNuQixPQUFPO1lBQUVELFNBQVM7WUFBT0MsT0FBT0EsTUFBTUMsT0FBTztRQUFDO0lBQ2hEO0FBQ0YsRUFBRTtBQUVGLHlCQUF5QjtBQUNsQixNQUFNeUMsa0JBQWtCLE9BQzdCbkQsUUFDQStCO0lBUUEsSUFBSTtRQUNGckQsaURBQU1BLENBQUMwQyxHQUFHLENBQUMsQ0FBQyw2QkFBNkIsRUFBRXBCLE9BQU8sQ0FBQztRQUNuRCxNQUFNNEMsaUJBQWlCM0UsdURBQUdBLENBQUNrQyxJQUFJLGdCQUFnQkg7UUFFL0MsNENBQTRDO1FBQzVDLE1BQU1zQyxvQkFBb0JuRCxtQ0FBbUM7WUFDM0QsR0FBRzRDLFdBQVc7WUFDZFUsV0FBVyxJQUFJbkMsT0FBT0MsV0FBVztZQUNqQ1QsY0FBYztRQUNoQjtRQUVBLE1BQU1zRCxPQUFPO1lBQ1gsR0FBR3JCLFdBQVc7WUFDZFUsV0FBVyxJQUFJbkMsT0FBT0MsV0FBVztZQUNqQytCO1lBQ0F4QyxjQUFjO1lBQ2R5Qyx5QkFBeUIsSUFBSWpDLE9BQU9DLFdBQVc7UUFDakQ7UUFFQSxNQUFNckMsMERBQU1BLENBQUMwRSxnQkFBZ0JRLE1BQU07WUFBRUMsT0FBTztRQUFLO1FBQ2pEM0UsaURBQU1BLENBQUMwQyxHQUFHLENBQUM7UUFFWCxPQUFPO1lBQUVaLFNBQVM7UUFBSztJQUN6QixFQUFFLE9BQU9DLE9BQVk7UUFDbkIvQixpREFBTUEsQ0FBQytCLEtBQUssQ0FBQywrQkFBK0JBO1FBQzVDLE9BQU87WUFBRUQsU0FBUztZQUFPQyxPQUFPQSxNQUFNQyxPQUFPO1FBQUM7SUFDaEQ7QUFDRixFQUFFO0FBRUssTUFBTTRDLGlCQUFpQixPQUFPdEQ7SUFDbkMsSUFBSTtRQUNGLE1BQU11RCxhQUFhLE1BQU1wRiwwREFBTUEsQ0FBQ0YsdURBQUdBLENBQUNrQyxJQUFJLGdCQUFnQkg7UUFFeEQsSUFBSXVELFdBQVdDLE1BQU0sSUFBSTtZQUN2QixPQUFPO2dCQUFFaEQsU0FBUztnQkFBTXBCLFNBQVNtRSxXQUFXSCxJQUFJO1lBQWtCO1FBQ3BFLE9BQU87WUFDTCxPQUFPO2dCQUFFNUMsU0FBUztnQkFBT0MsT0FBTztnQkFBcUJyQixTQUFTO1lBQUs7UUFDckU7SUFDRixFQUFFLE9BQU9xQixPQUFZO1FBQ25CZ0QsUUFBUWhELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87WUFBRUQsU0FBUztZQUFPQyxPQUFPQSxNQUFNQyxPQUFPO1lBQUV0QixTQUFTO1FBQUs7SUFDL0Q7QUFDRixFQUFFO0FBRUssTUFBTXNFLG9CQUFvQixPQUMvQjFELFFBQ0EyRDtJQUVBLElBQUk7UUFDRixNQUFNZixpQkFBaUIzRSx1REFBR0EsQ0FBQ2tDLElBQUksZ0JBQWdCSDtRQUMvQyxNQUFNNEQsaUJBQWlCLE1BQU16RiwwREFBTUEsQ0FBQ3lFO1FBRXBDLElBQUlnQixlQUFlSixNQUFNLElBQUk7WUFDM0IsTUFBTUssY0FBY0QsZUFBZVIsSUFBSTtZQUN2QyxNQUFNVSxpQkFBaUI7Z0JBQ3JCLEdBQUdELFdBQVc7Z0JBQ2QsR0FBR0YsY0FBYztnQkFDakJsQixXQUFXLElBQUluQyxPQUFPQyxXQUFXO1lBQ25DO1lBRUEsc0RBQXNEO1lBQ3REdUQsZUFBZXhCLGlCQUFpQixHQUFHbkQsbUNBQW1DMkU7WUFDdEVBLGVBQWV2Qix1QkFBdUIsR0FBRyxJQUFJakMsT0FBT0MsV0FBVztZQUUvRCxNQUFNbkMsNkRBQVNBLENBQUN3RSxnQkFBZ0JrQjtZQUNoQ3BGLGlEQUFNQSxDQUFDMEMsR0FBRyxDQUFDO1lBRVgsT0FBTztnQkFBRVosU0FBUztZQUFLO1FBQ3pCLE9BQU87WUFDTCxNQUFNLElBQUl1RCxNQUFNO1FBQ2xCO0lBQ0YsRUFBRSxPQUFPdEQsT0FBWTtRQUNuQi9CLGlEQUFNQSxDQUFDK0IsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDOUMsT0FBTztZQUFFRCxTQUFTO1lBQU9DLE9BQU9BLE1BQU1DLE9BQU87UUFBQztJQUNoRDtBQUNGLEVBQUU7QUFFRiw2QkFBNkI7QUFDdEIsTUFBTXNELFVBQVU7SUFDckIsTUFBTSxDQUFDL0IsTUFBTWdDLFFBQVEsR0FBR3pGLCtDQUFRQSxDQUFjO0lBQzlDLE1BQU0sQ0FBQzBGLFNBQVNDLFdBQVcsR0FBRzNGLCtDQUFRQSxDQUFDO0lBRXZDQyxnREFBU0EsQ0FBQztRQUNSLE1BQU0yRixjQUFjdEcsaUVBQWtCQSxDQUFDMEQsTUFBTSxDQUFDNkM7WUFDNUNKLFFBQVFJO1lBQ1JGLFdBQVc7UUFDYjtRQUVBLE9BQU9DO0lBQ1QsR0FBRyxFQUFFO0lBRUwsT0FBTztRQUFFbkM7UUFBTWlDO0lBQVE7QUFDekIsRUFBRTtBQUVGLHVDQUF1QztBQUNoQyxNQUFNSSx5QkFBeUIsT0FDcEN0RSxRQUNBdUUsTUFDQUMsU0FDQUM7SUFNQSxJQUFJO1FBQ0ZoQixRQUFRckMsR0FBRyxDQUFDLDhEQUE4RHBCO1FBQzFFeUQsUUFBUXJDLEdBQUcsQ0FBQyw0QkFBNEI7WUFBRW1EO1lBQU1HLGNBQWNGLFFBQVFqRCxNQUFNO1lBQUVrRDtRQUFZO1FBRTFGLGtCQUFrQjtRQUNsQixJQUFJLENBQUN6RSxRQUFRLE1BQU0sSUFBSStELE1BQU07UUFDN0IsSUFBSSxDQUFDUSxNQUFNLE1BQU0sSUFBSVIsTUFBTTtRQUMzQixJQUFJLENBQUNTLFdBQVcsQ0FBQ0csTUFBTUMsT0FBTyxDQUFDSixVQUFVLE1BQU0sSUFBSVQsTUFBTTtRQUN6RCxJQUFJUyxRQUFRakQsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFJd0MsTUFBTTtRQUUxQyw0Q0FBNEM7UUFDNUMsSUFBSSxDQUFDNUQsSUFBSTtZQUNQc0QsUUFBUWhELEtBQUssQ0FBQztZQUNkLE1BQU0sSUFBSXNELE1BQU07UUFDbEI7UUFFQSw2QkFBNkI7UUFDN0IsSUFBSTtZQUNGTixRQUFRckMsR0FBRyxDQUFDO1lBQ1osTUFBTXlELFVBQVU1Ryx1REFBR0EsQ0FBQ2tDLElBQUksa0JBQWtCO1lBQzFDLE1BQU1qQywwREFBTUEsQ0FBQzJHLFNBQVM7Z0JBQUVDLFdBQVcsSUFBSXhFLE9BQU9DLFdBQVc7WUFBRyxHQUFHO2dCQUFFOEMsT0FBTztZQUFLO1lBQzdFSSxRQUFRckMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPMkQsV0FBZ0I7WUFDdkJ0QixRQUFRaEQsS0FBSyxDQUFDLCtDQUErQ3NFO1lBQzdELE1BQU0sSUFBSWhCLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRWdCLFVBQVVyRSxPQUFPLENBQUMsQ0FBQztRQUNwRTtRQUVBLCtDQUErQztRQUMvQytDLFFBQVFyQyxHQUFHLENBQUM7UUFDWixNQUFNNEQsZ0JBQWdCLE1BQU0xQixlQUFldEQ7UUFDM0N5RCxRQUFRckMsR0FBRyxDQUFDLHlDQUF5QzRELGNBQWN4RSxPQUFPO1FBRTFFLE1BQU04QixvQkFBb0IwQyxjQUFjeEUsT0FBTyxJQUFJd0UsY0FBYzVGLE9BQU8sR0FDcEU0RixjQUFjNUYsT0FBTyxDQUFDa0QsaUJBQWlCLElBQUksTUFDM0M7UUFFSm1CLFFBQVFyQyxHQUFHLENBQUMsd0NBQXdDa0I7UUFFcEQsbURBQW1EO1FBQ25EbUIsUUFBUXJDLEdBQUcsQ0FBQztRQUNaLE1BQU02RCxzQkFBc0JULFFBQVFVLEdBQUcsQ0FBQ0MsQ0FBQUE7WUFDdEMsSUFBSUEsT0FBT0MsY0FBYyxFQUFFO2dCQUN6QixPQUFPO29CQUNMLEdBQUdELE1BQU07b0JBQ1RDLGdCQUFnQjVGLEtBQUs2RixLQUFLLENBQUNGLE9BQU9DLGNBQWMsR0FBRzlDO2dCQUNyRDtZQUNGO1lBQ0EsT0FBTzZDO1FBQ1Q7UUFFQSwrQ0FBK0M7UUFDL0MsTUFBTUcsWUFBWWIsYUFBYWEsYUFBYSxDQUFDLEVBQUVmLEtBQUssQ0FBQyxFQUFFakUsS0FBS2lGLEdBQUcsR0FBRyxDQUFDO1FBQ25FOUIsUUFBUXJDLEdBQUcsQ0FBQyxnQ0FBZ0NrRTtRQUU1QyxpREFBaUQ7UUFDakQsTUFBTUUsY0FBbUI7WUFDdkJqQjtZQUNBZTtZQUNBZCxTQUFTUztZQUNUUSxhQUFhLElBQUluRixPQUFPQyxXQUFXO1FBQ3JDO1FBRUEsK0JBQStCO1FBQy9CLElBQUlrRSxhQUFhO1lBQ2ZlLFlBQVlFLE9BQU8sR0FBRztnQkFDcEJDLHFCQUFxQm5HLEtBQUs2RixLQUFLLENBQUNaLFlBQVlrQixtQkFBbUIsR0FBR3JEO2dCQUNsRXNELGlCQUFpQm5CLFlBQVltQixlQUFlO2dCQUM1Q0MsbUJBQW1CQyxlQUFlckIsWUFBWW1CLGVBQWU7WUFDL0Q7UUFDRjtRQUVBLG9FQUFvRTtRQUNwRSxJQUFJO1lBQ0ZuQyxRQUFRckMsR0FBRyxDQUFDO1lBRVoscURBQXFEO1lBQ3JELE1BQU0yRSxhQUFhOUgsdURBQUdBLENBQUNrQyxJQUFJLFlBQVltRjtZQUN2QyxNQUFNVSxrQkFBa0I7Z0JBQ3RCLEdBQUdSLFdBQVc7Z0JBQ2R4RjtnQkFDQW9DLFdBQVcsSUFBSTlCLE9BQU9DLFdBQVc7WUFDbkM7WUFFQSxNQUFNckMsMERBQU1BLENBQUM2SCxZQUFZQztZQUN6QnZDLFFBQVFyQyxHQUFHLENBQUM7WUFFWix3Q0FBd0M7WUFDeEMsTUFBTTZFLGlCQUFpQmhJLHVEQUFHQSxDQUFDa0MsSUFBSSxDQUFDLE1BQU0sRUFBRUgsT0FBTyxTQUFTLENBQUMsRUFBRXNGO1lBQzNELE1BQU1wSCwwREFBTUEsQ0FBQytILGdCQUFnQkQ7WUFDN0J2QyxRQUFRckMsR0FBRyxDQUFDO1lBRVosa0NBQWtDO1lBQ2xDLElBQUk0RCxjQUFjeEUsT0FBTyxJQUFJd0UsY0FBYzVGLE9BQU8sRUFBRTtnQkFDbEQsSUFBSTtvQkFDRnFFLFFBQVFyQyxHQUFHLENBQUM7b0JBQ1osTUFBTXJCLG1CQUFtQkMsUUFBUWdGLGNBQWM1RixPQUFPLENBQUNVLFlBQVksSUFBSTtvQkFDdkUyRCxRQUFRckMsR0FBRyxDQUFDO2dCQUNkLEVBQUUsT0FBTzhFLGNBQWM7b0JBQ3JCekMsUUFBUTBDLElBQUksQ0FBQywyREFBMkREO2dCQUMxRTtZQUNGO1lBRUEsT0FBTztnQkFBRTFGLFNBQVM7Z0JBQU04RTtZQUFVO1FBQ3BDLEVBQUUsT0FBT2MsaUJBQXNCO1lBQzdCM0MsUUFBUWhELEtBQUssQ0FBQyx3RUFBd0UyRjtRQUN0RiwwQ0FBMEM7UUFDNUM7UUFFQTNDLFFBQVFyQyxHQUFHLENBQUM7UUFDWixNQUFNdUIsVUFBVTFFLHVEQUFHQSxDQUFDa0MsSUFBSSxTQUFTSDtRQUVqQywyQ0FBMkM7UUFDM0MsSUFBSXFHLFVBQVU7UUFDZCxNQUFNQyxhQUFhO1FBQ25CLElBQUlDO1FBRUosTUFBT0YsVUFBVUMsV0FBWTtZQUMzQixJQUFJO2dCQUNGQyxVQUFVLE1BQU1wSSwwREFBTUEsQ0FBQ3dFO2dCQUN2QjtZQUNGLEVBQUUsT0FBT2xDLE9BQU87Z0JBQ2Q0RjtnQkFDQTVDLFFBQVEwQyxJQUFJLENBQUMsQ0FBQyxnREFBZ0QsRUFBRUUsUUFBUSxDQUFDLEVBQUVDLFdBQVcsRUFBRSxDQUFDLEVBQUU3RjtnQkFDM0YsSUFBSTRGLFdBQVdDLFlBQVksTUFBTTdGO2dCQUNqQyx1QkFBdUI7Z0JBQ3ZCLE1BQU0sSUFBSW9DLFFBQVEyRCxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO1lBQ25EO1FBQ0Y7UUFFQSxJQUFJLENBQUNELFdBQVcsQ0FBQ0EsUUFBUS9DLE1BQU0sSUFBSTtZQUNqQ0MsUUFBUWhELEtBQUssQ0FBQyw4Q0FBOENUO1lBRTVELGdFQUFnRTtZQUNoRSxJQUFJO2dCQUNGeUQsUUFBUXJDLEdBQUcsQ0FBQztnQkFDWixNQUFNbEQsMERBQU1BLENBQUN5RSxTQUFTO29CQUNwQk4sVUFBVTt3QkFBQ21EO3FCQUFZO29CQUN2QnBELFdBQVcsSUFBSTlCLE9BQU9DLFdBQVc7b0JBQ2pDa0MsV0FBVyxJQUFJbkMsT0FBT0MsV0FBVztnQkFDbkM7Z0JBQ0FrRCxRQUFRckMsR0FBRyxDQUFDO2dCQUNaLE9BQU87b0JBQUVaLFNBQVM7b0JBQU04RTtnQkFBVTtZQUNwQyxFQUFFLE9BQU9vQixhQUFhO2dCQUNwQmpELFFBQVFoRCxLQUFLLENBQUMsdURBQXVEaUc7Z0JBQ3JFLE1BQU0sSUFBSTNDLE1BQU07WUFDbEI7UUFDRjtRQUVBTixRQUFRckMsR0FBRyxDQUFDO1FBQ1osTUFBTWUsV0FBV29FLFFBQVFuRCxJQUFJO1FBQzdCLE1BQU1mLFdBQVdGLFNBQVNFLFFBQVEsSUFBSSxFQUFFO1FBRXhDLHdDQUF3QztRQUN4QyxNQUFNc0UsdUJBQXVCdEUsU0FBU3VFLFNBQVMsQ0FBQyxDQUFDQyxJQUFXQSxFQUFFdkIsU0FBUyxLQUFLQTtRQUU1RSxJQUFJcUIseUJBQXlCLENBQUMsR0FBRztZQUMvQiwwQkFBMEI7WUFDMUJsRCxRQUFRckMsR0FBRyxDQUFDLGlEQUFpRGtFO1lBQzdEakQsUUFBUSxDQUFDc0UscUJBQXFCLEdBQUduQjtRQUNuQyxPQUFPO1lBQ0wsa0JBQWtCO1lBQ2xCL0IsUUFBUXJDLEdBQUcsQ0FBQywwQ0FBMENrRTtZQUN0RGpELFNBQVN5RSxJQUFJLENBQUN0QjtRQUNoQjtRQUVBLElBQUk7WUFDRix1QkFBdUI7WUFDdkIvQixRQUFRckMsR0FBRyxDQUFDO1lBRVosNkNBQTZDO1lBQzdDaUYsVUFBVTtZQUNWLE1BQU9BLFVBQVVDLFdBQVk7Z0JBQzNCLElBQUk7b0JBQ0YsTUFBTWxJLDZEQUFTQSxDQUFDdUUsU0FBUzt3QkFDdkJOO3dCQUNBb0QsYUFBYSxJQUFJbkYsT0FBT0MsV0FBVztvQkFDckM7b0JBQ0FrRCxRQUFRckMsR0FBRyxDQUFDO29CQUNaO2dCQUNGLEVBQUUsT0FBTzJGLGFBQWE7b0JBQ3BCVjtvQkFDQTVDLFFBQVEwQyxJQUFJLENBQUMsQ0FBQyxpREFBaUQsRUFBRUUsUUFBUSxDQUFDLEVBQUVDLFdBQVcsRUFBRSxDQUFDLEVBQUVTO29CQUM1RixJQUFJVixXQUFXQyxZQUFZLE1BQU1TO29CQUNqQyxNQUFNLElBQUlsRSxRQUFRMkQsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUztnQkFDbkQ7WUFDRjtZQUVBLDhCQUE4QjtZQUM5QixJQUFJeEIsY0FBY3hFLE9BQU8sSUFBSXdFLGNBQWM1RixPQUFPLEVBQUU7Z0JBQ2xEcUUsUUFBUXJDLEdBQUcsQ0FBQztnQkFDWixJQUFJO29CQUNGLE1BQU1yQixtQkFBbUJDLFFBQVFnRixjQUFjNUYsT0FBTyxDQUFDVSxZQUFZLElBQUk7b0JBQ3ZFMkQsUUFBUXJDLEdBQUcsQ0FBQztnQkFDZCxFQUFFLE9BQU84RSxjQUFjO29CQUNyQnpDLFFBQVEwQyxJQUFJLENBQUMsMkRBQTJERDtnQkFDMUU7WUFDRjtZQUVBLDREQUE0RDtZQUM1RCxNQUFNYyxZQUFZLE1BQU03SSwwREFBTUEsQ0FBQ3dFO1lBQy9CLElBQUlxRSxVQUFVeEQsTUFBTSxJQUFJO2dCQUN0QixNQUFNeUQsYUFBYUQsVUFBVTVELElBQUk7Z0JBQ2pDLElBQUk2RCxXQUFXNUUsUUFBUSxJQUFJNEUsV0FBVzVFLFFBQVEsQ0FBQ2QsTUFBTSxHQUFHLEdBQUc7b0JBQ3pEa0MsUUFBUXJDLEdBQUcsQ0FBQztvQkFDWixPQUFPO3dCQUFFWixTQUFTO3dCQUFNOEU7b0JBQVU7Z0JBQ3BDLE9BQU87b0JBQ0w3QixRQUFRMEMsSUFBSSxDQUFDO29CQUNiLE9BQU87d0JBQUUzRixTQUFTO3dCQUFNd0MsU0FBUzt3QkFBNENzQztvQkFBVTtnQkFDekY7WUFDRjtZQUVBLE9BQU87Z0JBQUU5RSxTQUFTO2dCQUFNOEU7WUFBVTtRQUNwQyxFQUFFLE9BQU95QixhQUFrQjtZQUN6QnRELFFBQVFoRCxLQUFLLENBQUMsNENBQTRDc0c7WUFDMUQsT0FBTztnQkFBRXZHLFNBQVM7Z0JBQU9DLE9BQU8sQ0FBQyxnQ0FBZ0MsRUFBRXNHLFlBQVlyRyxPQUFPLENBQUMsQ0FBQztZQUFDO1FBQzNGO0lBQ0YsRUFBRSxPQUFPRCxPQUFZO1FBQ25CZ0QsUUFBUWhELEtBQUssQ0FBQyxvQ0FBb0NBO1FBRWxELDBDQUEwQztRQUMxQyxJQUFJO1lBQ0ZnRCxRQUFRckMsR0FBRyxDQUFDO1lBQ1osTUFBTW9FLGNBQWM7Z0JBQ2xCeEY7Z0JBQ0F1RTtnQkFDQUM7Z0JBQ0FDO2dCQUNBSyxXQUFXLElBQUl4RSxPQUFPQyxXQUFXO1lBQ25DO1lBRUEseUNBQXlDO1lBQ3pDLE1BQU0yRyxXQUFXQyxhQUFhQyxPQUFPLENBQUMsb0JBQW9CO1lBQzFELE1BQU1DLGFBQWFDLEtBQUtDLEtBQUssQ0FBQ0w7WUFDOUJHLFdBQVdQLElBQUksQ0FBQ3RCO1lBRWhCLDRCQUE0QjtZQUM1QjJCLGFBQWFLLE9BQU8sQ0FBQyxpQkFBaUJGLEtBQUtHLFNBQVMsQ0FBQ0o7WUFDckQ1RCxRQUFRckMsR0FBRyxDQUFDO1lBRVosT0FBTztnQkFDTFosU0FBUztnQkFDVEMsT0FBTyxDQUFDLEVBQUVBLE1BQU1DLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztnQkFDMURnSCxjQUFjO1lBQ2hCO1FBQ0YsRUFBRSxPQUFPQyxlQUFlO1lBQ3RCbEUsUUFBUWhELEtBQUssQ0FBQyw0Q0FBNENrSDtZQUMxRCxPQUFPO2dCQUFFbkgsU0FBUztnQkFBT0MsT0FBT0EsTUFBTUMsT0FBTztZQUFDO1FBQ2hEO0lBQ0Y7QUFDRixFQUFFO0FBRUYsbUVBQW1FO0FBQ25FLFNBQVNvRixlQUFlOEIsT0FBZTtJQUNyQyxNQUFNQyxVQUFVckksS0FBS3NJLEtBQUssQ0FBQ0YsVUFBVTtJQUNyQyxNQUFNRyxtQkFBbUJILFVBQVU7SUFDbkMsT0FBTyxDQUFDLEVBQUVDLFFBQVEsRUFBRSxFQUFFRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQzNDO0FBRU8sTUFBTUMsa0JBQWtCLE9BQU9oSTtJQUNwQyxJQUFJO1FBQ0Z5RCxRQUFRckMsR0FBRyxDQUFDLHlDQUF5Q3BCO1FBRXJELElBQUksQ0FBQ0EsUUFBUTtZQUNYeUQsUUFBUWhELEtBQUssQ0FBQztZQUNkLE9BQU87Z0JBQUVELFNBQVM7Z0JBQU9DLE9BQU87Z0JBQXVCNEIsVUFBVSxFQUFFO1lBQUM7UUFDdEU7UUFFQSxJQUFJLENBQUNsQyxJQUFJO1lBQ1BzRCxRQUFRaEQsS0FBSyxDQUFDO1lBQ2QsT0FBTztnQkFBRUQsU0FBUztnQkFBT0MsT0FBTztnQkFBNEI0QixVQUFVLEVBQUU7WUFBQztRQUMzRTtRQUVBLGtEQUFrRDtRQUNsRCxJQUFJNEYsY0FBcUIsRUFBRTtRQUMzQixJQUFJQyxTQUFtQixFQUFFO1FBRXpCLCtDQUErQztRQUMvQyxJQUFJO1lBQ0Z6RSxRQUFRckMsR0FBRyxDQUFDO1lBQ1osTUFBTStHLElBQUk5Six5REFBS0EsQ0FBQ0wsOERBQVVBLENBQUNtQyxJQUFJLGFBQWE3Qix5REFBS0EsQ0FBQyxVQUFVLE1BQU0wQjtZQUNsRSxNQUFNb0ksbUJBQW1CLE1BQU03SiwyREFBT0EsQ0FBQzRKO1lBRXZDLElBQUksQ0FBQ0MsaUJBQWlCQyxLQUFLLEVBQUU7Z0JBQzNCLE1BQU1DLGlCQUFpQkYsaUJBQWlCRyxJQUFJLENBQUNyRCxHQUFHLENBQUNqSCxDQUFBQSxNQUFPQSxJQUFJbUYsSUFBSTtnQkFDaEVLLFFBQVFyQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRWtILGVBQWUvRyxNQUFNLENBQUMsZ0NBQWdDLENBQUM7Z0JBQ3ZGMEcsY0FBYzt1QkFBSUE7dUJBQWdCSztpQkFBZTtZQUNuRCxPQUFPO2dCQUNMN0UsUUFBUXJDLEdBQUcsQ0FBQztZQUNkO1FBQ0YsRUFBRSxPQUFPb0gsYUFBa0I7WUFDekIvRSxRQUFRaEQsS0FBSyxDQUFDLHVEQUF1RCtIO1lBQ3JFTixPQUFPcEIsSUFBSSxDQUFDLENBQUMseUNBQXlDLEVBQUUwQixZQUFZOUgsT0FBTyxDQUFDLENBQUM7UUFDL0U7UUFFQSxnREFBZ0Q7UUFDaEQsSUFBSTtZQUNGK0MsUUFBUXJDLEdBQUcsQ0FBQztZQUNaLE1BQU1xSCxrQkFBa0J6Syw4REFBVUEsQ0FBQ21DLElBQUksQ0FBQyxNQUFNLEVBQUVILE9BQU8sU0FBUyxDQUFDO1lBQ2pFLE1BQU0wSSx1QkFBdUIsTUFBTW5LLDJEQUFPQSxDQUFDa0s7WUFFM0MsSUFBSSxDQUFDQyxxQkFBcUJMLEtBQUssRUFBRTtnQkFDL0IsTUFBTU0sd0JBQXdCRCxxQkFBcUJILElBQUksQ0FBQ3JELEdBQUcsQ0FBQ2pILENBQUFBLE1BQU9BLElBQUltRixJQUFJO2dCQUMzRUssUUFBUXJDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFdUgsc0JBQXNCcEgsTUFBTSxDQUFDLCtCQUErQixDQUFDO2dCQUU3RixnRkFBZ0Y7Z0JBQ2hGLE1BQU1xSCxjQUFjRCxzQkFBc0JFLE1BQU0sQ0FBQ0MsQ0FBQUEsYUFDL0MsQ0FBQ2IsWUFBWWMsSUFBSSxDQUFDN0IsQ0FBQUEsV0FBWUEsU0FBUzVCLFNBQVMsS0FBS3dELFdBQVd4RCxTQUFTO2dCQUczRTJDLGNBQWM7dUJBQUlBO3VCQUFnQlc7aUJBQVk7WUFDaEQsT0FBTztnQkFDTG5GLFFBQVFyQyxHQUFHLENBQUM7WUFDZDtRQUNGLEVBQUUsT0FBTzRILG9CQUF5QjtZQUNoQ3ZGLFFBQVFoRCxLQUFLLENBQUMsK0RBQStEdUk7WUFDN0VkLE9BQU9wQixJQUFJLENBQUMsQ0FBQyxpREFBaUQsRUFBRWtDLG1CQUFtQnRJLE9BQU8sQ0FBQyxDQUFDO1FBQzlGO1FBRUEsbUZBQW1GO1FBQ25GLElBQUk7WUFDRitDLFFBQVFyQyxHQUFHLENBQUM7WUFDWixNQUFNdUIsVUFBVTFFLHVEQUFHQSxDQUFDa0MsSUFBSSxTQUFTSDtZQUNqQyxNQUFNdUcsVUFBVSxNQUFNcEksMERBQU1BLENBQUN3RTtZQUU3QixJQUFJNEQsUUFBUS9DLE1BQU0sSUFBSTtnQkFDcEIsTUFBTXJCLFdBQVdvRSxRQUFRbkQsSUFBSTtnQkFDN0IsSUFBSWpCLFNBQVNFLFFBQVEsSUFBSXNDLE1BQU1DLE9BQU8sQ0FBQ3pDLFNBQVNFLFFBQVEsS0FBS0YsU0FBU0UsUUFBUSxDQUFDZCxNQUFNLEdBQUcsR0FBRztvQkFDekZrQyxRQUFRckMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVlLFNBQVNFLFFBQVEsQ0FBQ2QsTUFBTSxDQUFDLDBCQUEwQixDQUFDO29CQUVwRix5RUFBeUU7b0JBQ3pFLE1BQU1xSCxjQUFjekcsU0FBU0UsUUFBUSxDQUFDd0csTUFBTSxDQUFDQyxDQUFBQTt3QkFDM0MsSUFBSUEsV0FBV3hELFNBQVMsRUFBRTs0QkFDeEIsT0FBTyxDQUFDMkMsWUFBWWMsSUFBSSxDQUFDN0IsQ0FBQUEsV0FBWUEsU0FBUzVCLFNBQVMsS0FBS3dELFdBQVd4RCxTQUFTO3dCQUNsRixPQUFPOzRCQUNMLE9BQU8sQ0FBQzJDLFlBQVljLElBQUksQ0FBQzdCLENBQUFBLFdBQVlBLFNBQVMzQyxJQUFJLEtBQUt1RSxXQUFXdkUsSUFBSTt3QkFDeEU7b0JBQ0Y7b0JBRUEwRCxjQUFjOzJCQUFJQTsyQkFBZ0JXO3FCQUFZO2dCQUNoRCxPQUFPO29CQUNMbkYsUUFBUXJDLEdBQUcsQ0FBQztnQkFDZDtZQUNGLE9BQU87Z0JBQ0xxQyxRQUFRckMsR0FBRyxDQUFDO1lBQ2Q7UUFDRixFQUFFLE9BQU82SCxjQUFtQjtZQUMxQnhGLFFBQVFoRCxLQUFLLENBQUMsaURBQWlEd0k7WUFDL0RmLE9BQU9wQixJQUFJLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRW1DLGFBQWF2SSxPQUFPLENBQUMsQ0FBQztRQUMxRTtRQUVBLGlCQUFpQjtRQUNqQitDLFFBQVFyQyxHQUFHLENBQUMsQ0FBQyxzREFBc0QsRUFBRTZHLFlBQVkxRyxNQUFNLENBQUMsQ0FBQztRQUV6RixJQUFJMEcsWUFBWTFHLE1BQU0sS0FBSyxLQUFLMkcsT0FBTzNHLE1BQU0sR0FBRyxHQUFHO1lBQ2pELDJFQUEyRTtZQUMzRWtDLFFBQVFyQyxHQUFHLENBQUM7WUFFWixJQUFJO2dCQUNGLE1BQU04SCxpQkFBaUIvQixhQUFhQyxPQUFPLENBQUM7Z0JBQzVDLElBQUk4QixnQkFBZ0I7b0JBQ2xCLE1BQU03QixhQUFhQyxLQUFLQyxLQUFLLENBQUMyQjtvQkFDOUIsTUFBTUMsY0FBYzlCLFdBQVd3QixNQUFNLENBQUMsQ0FBQ087d0JBQ3JDLE9BQU9BLFFBQVFwSixNQUFNLEtBQUtBLFVBQ3hCb0osUUFBUTVFLE9BQU8sSUFBSTRFLFFBQVE1RSxPQUFPLENBQUNqRCxNQUFNLEdBQUc7b0JBRWhEO29CQUVBLElBQUk0SCxZQUFZNUgsTUFBTSxHQUFHLEdBQUc7d0JBQzFCa0MsUUFBUXJDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFK0gsWUFBWTVILE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQzt3QkFDcEYsT0FBTzs0QkFDTGYsU0FBUzs0QkFDVDZCLFVBQVU4Rzs0QkFDVkUsVUFBVTtnQ0FBQzttQ0FBa0RuQjs2QkFBTzt3QkFDdEU7b0JBQ0Y7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9vQixhQUFhO2dCQUNwQjdGLFFBQVFoRCxLQUFLLENBQUMsa0RBQWtENkk7WUFDbEU7WUFFQSxPQUFPO2dCQUNMOUksU0FBUztnQkFDVEMsT0FBTztnQkFDUDhJLFNBQVNyQjtnQkFDVDdGLFVBQVUsRUFBRTtZQUNkO1FBQ0Y7UUFFQSx1Q0FBdUM7UUFDdkMsTUFBTW1ILGlCQUFpQjtlQUFJdkI7U0FBWSxDQUFDd0IsSUFBSSxDQUFDLENBQUNDLEdBQUdDO1lBQy9DLHdEQUF3RDtZQUN4RCxJQUFJRCxFQUFFdEgsU0FBUyxJQUFJdUgsRUFBRXZILFNBQVMsRUFBRTtnQkFDOUIsT0FBTyxJQUFJOUIsS0FBS3FKLEVBQUV2SCxTQUFTLEVBQUV3SCxPQUFPLEtBQUssSUFBSXRKLEtBQUtvSixFQUFFdEgsU0FBUyxFQUFFd0gsT0FBTztZQUN4RTtZQUNBLDhCQUE4QjtZQUM5QixPQUFPLElBQUl0SixLQUFLcUosRUFBRXBGLElBQUksRUFBRXFGLE9BQU8sS0FBSyxJQUFJdEosS0FBS29KLEVBQUVuRixJQUFJLEVBQUVxRixPQUFPO1FBQzlEO1FBRUEsOENBQThDO1FBQzlDLElBQUlKLGVBQWVqSSxNQUFNLEdBQUcsR0FBRztZQUM3QmtDLFFBQVFyQyxHQUFHLENBQUMsNkJBQTZCb0ksZUFBZXRFLEdBQUcsQ0FBQzJCLENBQUFBLElBQUtBLEVBQUV0QyxJQUFJLEVBQUVzRixJQUFJLENBQUM7UUFDaEY7UUFFQSxPQUFPO1lBQ0xySixTQUFTO1lBQ1Q2QixVQUFVbUg7WUFDVkgsVUFBVW5CLE9BQU8zRyxNQUFNLEdBQUcsSUFBSTJHLFNBQVM0QjtRQUN6QztJQUNGLEVBQUUsT0FBT3JKLE9BQVk7UUFDbkJnRCxRQUFRaEQsS0FBSyxDQUFDLHNDQUFzQ0E7UUFFcEQsK0NBQStDO1FBQy9DLElBQUk7WUFDRixNQUFNNEcsYUFBYUYsYUFBYUMsT0FBTyxDQUFDO1lBQ3hDLElBQUlDLFlBQVk7Z0JBQ2QsTUFBTTBDLGVBQWV6QyxLQUFLQyxLQUFLLENBQUNGO2dCQUNoQyxNQUFNOEIsY0FBY1ksYUFBYWxCLE1BQU0sQ0FBQyxDQUFDbUIsT0FBY0EsS0FBS2hLLE1BQU0sS0FBS0E7Z0JBRXZFLElBQUltSixZQUFZNUgsTUFBTSxHQUFHLEdBQUc7b0JBQzFCa0MsUUFBUXJDLEdBQUcsQ0FBQyx5REFBeUQrSCxZQUFZNUgsTUFBTTtvQkFDdkYsT0FBTzt3QkFDTGYsU0FBUzt3QkFDVDZCLFVBQVU4RyxZQUFZakUsR0FBRyxDQUFDLENBQUM4RSxPQUFlO2dDQUN4Q3pGLE1BQU15RixLQUFLekYsSUFBSTtnQ0FDZkMsU0FBU3dGLEtBQUt4RixPQUFPO2dDQUNyQmtCLFNBQVNzRSxLQUFLdkYsV0FBVzs0QkFDM0I7d0JBQ0F3RixhQUFhO29CQUNmO2dCQUNGO1lBQ0Y7WUFFQSxxQ0FBcUM7WUFDckMsTUFBTWYsaUJBQWlCL0IsYUFBYUMsT0FBTyxDQUFDO1lBQzVDLElBQUk4QixnQkFBZ0I7Z0JBQ2xCLE1BQU1nQix1QkFBdUI1QyxLQUFLQyxLQUFLLENBQUMyQjtnQkFDeEMsSUFBSWdCLHFCQUFxQjNJLE1BQU0sR0FBRyxHQUFHO29CQUNuQ2tDLFFBQVFyQyxHQUFHLENBQUMsMkRBQTJEOEkscUJBQXFCM0ksTUFBTTtvQkFDbEcsT0FBTzt3QkFDTGYsU0FBUzt3QkFDVDZCLFVBQVU2SDt3QkFDVkQsYUFBYTtvQkFDZjtnQkFDRjtZQUNGO1FBQ0YsRUFBRSxPQUFPWCxhQUFhO1lBQ3BCN0YsUUFBUWhELEtBQUssQ0FBQywwQ0FBMEM2STtRQUMxRDtRQUVBLE9BQU87WUFBRTlJLFNBQVM7WUFBT0MsT0FBT0EsTUFBTUMsT0FBTztZQUFFMkIsVUFBVSxFQUFFO1FBQUM7SUFDOUQ7QUFDRixFQUFFO0FBRUYsMkZBQTJGO0FBQ3BGLE1BQU04SCwwQkFBMEIsQ0FBQ0MsY0FBc0JDLE1BQWNDO0lBQzFFLElBQUlGLGlCQUFpQixpQkFBaUJBLGlCQUFpQixlQUFlO1FBQ3BFLE9BQU8sR0FBRyxxQ0FBcUM7SUFDakQ7SUFFQSxtREFBbUQ7SUFDbkQsTUFBTUcscUJBQThDO1FBQ2xELFdBQVc7UUFDWCxVQUFVO1FBQ1YsY0FBYztRQUNkLHFCQUFxQjtRQUNyQixpQkFBaUI7SUFDbkI7SUFFQSwrQ0FBK0M7SUFDL0MsTUFBTUMsaUJBQWlCRCxrQkFBa0IsQ0FBQ0gsYUFBYSxJQUFJRyxrQkFBa0IsQ0FBQyxTQUFTO0lBRXZGLHdEQUF3RDtJQUN4RCxNQUFNRSxlQUFlSCxhQUFhO0lBRWxDLHdEQUF3RDtJQUN4RCxPQUFPOUssS0FBSzZGLEtBQUssQ0FBQ21GLGlCQUFpQkgsT0FBT0ksZUFBZSxNQUFNO0FBQ2pFLEVBQUU7QUFFa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXRuZXNzLXdlYi1hcHAvLi9zcmMvbGliL2ZpcmViYXNlLnRzPzE1NDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRBdXRoLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBzaWduT3V0LCBvbkF1dGhTdGF0ZUNoYW5nZWQsIFVzZXIgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IGdldEZpcmVzdG9yZSwgY29sbGVjdGlvbiwgZG9jLCBzZXREb2MsIGdldERvYywgdXBkYXRlRG9jLCBxdWVyeSwgd2hlcmUsIGdldERvY3MgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vZGVidWcvbG9nZ2VyJztcbmltcG9ydCB7IGdldEFwcHMgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuXG4vLyBEZWZpbmUgVXNlclByb2ZpbGUgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcm9maWxlIHtcbiAgbmlja25hbWU6IHN0cmluZztcbiAgYWdlOiBudW1iZXI7XG4gIGdlbmRlcjogc3RyaW5nO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgd2VpZ2h0OiBudW1iZXI7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xuICBjYWxvcmllTXVsdGlwbGllcj86IG51bWJlcjtcbiAgZml0bmVzc0xldmVsPzogbnVtYmVyO1xuICBsYXN0Q2Fsb3JpZUZhY3RvclVwZGF0ZT86IHN0cmluZztcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgY2Fsb3JpZSBjYWxjdWxhdGlvbnNcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJNUih3ZWlnaHQ6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGFnZTogbnVtYmVyLCBnZW5kZXI6IHN0cmluZyk6IG51bWJlciB7XG4gIC8vIE1pZmZsaW4tU3QgSmVvciBFcXVhdGlvblxuICBpZiAoZ2VuZGVyLnRvTG93ZXJDYXNlKCkgPT09ICdtYWxlJykge1xuICAgIHJldHVybiAoMTAgKiB3ZWlnaHQpICsgKDYuMjUgKiBoZWlnaHQpIC0gKDUgKiBhZ2UpICsgNTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKDEwICogd2VpZ2h0KSArICg2LjI1ICogaGVpZ2h0KSAtICg1ICogYWdlKSAtIDE2MTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRBdmVyYWdlQk1SKGdlbmRlcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgLy8gQXZlcmFnZSBCTVIgdmFsdWVzIGJhc2VkIG9uIGdlbmRlclxuICByZXR1cm4gZ2VuZGVyLnRvTG93ZXJDYXNlKCkgPT09ICdtYWxlJyA/IDE2MDAgOiAxNDAwO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVQZXJzb25hbGl6ZWRDYWxvcmllRmFjdG9yKHByb2ZpbGU6IFVzZXJQcm9maWxlKTogbnVtYmVyIHtcbiAgLy8gQ2FsY3VsYXRlIEJNUiB1c2luZyBNaWZmbGluLVN0IEplb3JcbiAgY29uc3QgYm1yID0gY2FsY3VsYXRlQk1SKHByb2ZpbGUud2VpZ2h0LCBwcm9maWxlLmhlaWdodCwgcHJvZmlsZS5hZ2UsIHByb2ZpbGUuZ2VuZGVyKTtcbiAgXG4gIC8vIEJhc2UgZmFjdG9yIGZyb20gQk1SIChub3JtYWxpemVkIGFyb3VuZCBhdmVyYWdlIEJNUilcbiAgY29uc3QgYmFzZUJNUkZhY3RvciA9IGJtciAvIGdldEF2ZXJhZ2VCTVIocHJvZmlsZS5nZW5kZXIpO1xuICBcbiAgLy8gQWdlIGZhY3RvciAoZ3JhZHVhbGx5IHJlZHVjZXMgd2l0aCBhZ2UpXG4gIGNvbnN0IGFnZUZhY3RvciA9IE1hdGgubWF4KDAuODUsIDEgLSAoKHByb2ZpbGUuYWdlIC0gMzApICogMC4wMDMpKTtcbiAgXG4gIC8vIEJNSSBhZGp1c3RtZW50XG4gIGNvbnN0IGJtaSA9IHByb2ZpbGUud2VpZ2h0IC8gTWF0aC5wb3cocHJvZmlsZS5oZWlnaHQvMTAwLCAyKTtcbiAgY29uc3QgYm1pQWRqdXN0bWVudCA9IDEgKyAoKGJtaSAtIDIyKSAqIDAuMDEpO1xuICBcbiAgLy8gRml0bmVzcyBsZXZlbCBmYWN0b3IgKHN0YXJ0cyBhdCAxLjAsIGFkanVzdHMgb3ZlciB0aW1lKVxuICBjb25zdCBmaXRuZXNzTGV2ZWxGYWN0b3IgPSAxICsgKHByb2ZpbGUuZml0bmVzc0xldmVsIHx8IDApICogMC4wMjtcbiAgXG4gIHJldHVybiBiYXNlQk1SRmFjdG9yICogYWdlRmFjdG9yICogYm1pQWRqdXN0bWVudCAqIGZpdG5lc3NMZXZlbEZhY3Rvcjtcbn1cblxuLy8gVXBkYXRlIGZpdG5lc3MgbGV2ZWwgYWZ0ZXIgY29tcGxldGluZyBhIHdvcmtvdXRcbmV4cG9ydCBjb25zdCB1cGRhdGVGaXRuZXNzTGV2ZWwgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIGN1cnJlbnRGaXRuZXNzTGV2ZWw6IG51bWJlciA9IDApID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmaXRuZXNzTGV2ZWxJbmNyZWFzZSA9IDAuMTsgLy8gU21hbGwgaW5jcmVtZW50IHBlciB3b3Jrb3V0XG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ3VzZXJQcm9maWxlcycsIHVzZXJJZCksIHtcbiAgICAgIGZpdG5lc3NMZXZlbDogTWF0aC5taW4oMTAsIGN1cnJlbnRGaXRuZXNzTGV2ZWwgKyBmaXRuZXNzTGV2ZWxJbmNyZWFzZSksXG4gICAgICBsYXN0VXBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgZml0bmVzcyBsZXZlbCcsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufTtcblxuLy8gWW91ciBGaXJlYmFzZSBjb25maWd1cmF0aW9uXG4vLyBSZXBsYWNlIHRoZXNlIHZhbHVlcyB3aXRoIHlvdXIgb3duIEZpcmViYXNlIHByb2plY3QgY29uZmlndXJhdGlvblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogXCJBSXphU3lCRE5vQUgwWXVtaWNKSFBLTVlzTWR1bzVacGZVWEg4WGdcIixcbiAgYXV0aERvbWFpbjogXCJ3ZWJhcHAtMTUyMi5maXJlYmFzZWFwcC5jb21cIixcbiAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly93ZWJhcHAtMTUyMi1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcbiAgcHJvamVjdElkOiBcIndlYmFwcC0xNTIyXCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IFwid2ViYXBwLTE1MjIuZmlyZWJhc2VzdG9yYWdlLmFwcFwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI5NjUyMjM4ODcyMjdcIixcbiAgYXBwSWQ6IFwiMTo5NjUyMjM4ODcyMjc6d2ViOmUwYmE5OTM0MGM3ZGNiNGE3MjRkZGVcIixcbiAgbWVhc3VyZW1lbnRJZDogXCJHLUU3NVlOWktDNjVcIlxufTtcblxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxubG9nZ2VyLmxvZygnSW5pdGlhbGl6aW5nIEZpcmViYXNlLi4uJyk7XG5cbi8vIENoZWNrIGlmIEZpcmViYXNlIGFwcCBpcyBhbHJlYWR5IGluaXRpYWxpemVkIHRvIHByZXZlbnQgbXVsdGlwbGUgaW5zdGFuY2VzXG4vLyBUaGlzIGlzIHBhcnRpY3VsYXJseSBpbXBvcnRhbnQgaW4gTmV4dC5qcyB3aGljaCBjYW4gY2F1c2UgbXVsdGlwbGUgaW5pdGlhbGl6YXRpb25zXG5sZXQgYXBwO1xudHJ5IHtcbiAgY29uc3QgYXBwcyA9IGdldEFwcHMoKTtcbiAgXG4gIGlmIChhcHBzLmxlbmd0aCA9PT0gMCkge1xuICAgIGxvZ2dlci5sb2coJ05vIEZpcmViYXNlIGFwcCBpbnN0YW5jZSBmb3VuZCwgaW5pdGlhbGl6aW5nIGEgbmV3IG9uZScpO1xuICAgIGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGxvZ2dlci5sb2coJ0ZpcmViYXNlIGFwcCBhbHJlYWR5IGluaXRpYWxpemVkLCByZXVzaW5nIGV4aXN0aW5nIGluc3RhbmNlJyk7XG4gICAgYXBwID0gYXBwc1swXTtcbiAgfVxufSBjYXRjaCAoZXJyb3IpIHtcbiAgbG9nZ2VyLmVycm9yKCdFcnJvciBkdXJpbmcgRmlyZWJhc2UgaW5pdGlhbGl6YXRpb246JywgZXJyb3IpO1xuICAvLyBGYWxsIGJhY2sgdG8gbm9ybWFsIGluaXRpYWxpemF0aW9uXG4gIGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xufVxuXG5jb25zdCBhdXRoID0gZ2V0QXV0aChhcHApO1xuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcbmxvZ2dlci5sb2coJ0ZpcmViYXNlIGluaXRpYWxpemVkJywgeyBhdXRoSW5pdGlhbGl6ZWQ6ICEhYXV0aCwgZGJJbml0aWFsaXplZDogISFkYiB9KTtcblxuLy8gQXV0aCBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAoXG4gIGVtYWlsOiBzdHJpbmcsIFxuICBwYXNzd29yZDogc3RyaW5nLCBcbiAgZGlzcGxheU5hbWU6IHN0cmluZyxcbiAgcHJvZmlsZURhdGE/OiB7XG4gICAgbmlja25hbWU6IHN0cmluZztcbiAgICBhZ2U6IG51bWJlcjtcbiAgICBnZW5kZXI6IHN0cmluZztcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB3ZWlnaHQ6IG51bWJlcjtcbiAgfVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmxvZyhgUmVnaXN0ZXJpbmcgdXNlciB3aXRoIGVtYWlsOiAke2VtYWlsfWApO1xuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XG4gICAgY29uc3QgdXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XG4gICAgbG9nZ2VyLmxvZyhgVXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseSB3aXRoIFVJRDogJHt1c2VyLnVpZH1gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIHVzZXIgZG9jdW1lbnRcbiAgICAgIGxvZ2dlci5sb2coYENyZWF0aW5nIHVzZXIgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIGZvciBVSUQ6ICR7dXNlci51aWR9YCk7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgd29ya291dHM6IFtdLFxuICAgICAgICBjYWxvcmllTXVsdGlwbGllcjogMS4wLFxuICAgICAgICBmaXRuZXNzTGV2ZWw6IDAsXG4gICAgICAgIGxhc3RDYWxvcmllRmFjdG9yVXBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB1c2VyIHByb2ZpbGUgd2l0aCBwcm92aWRlZCBkYXRhIG9yIGRlZmF1bHRzXG4gICAgICBjb25zdCB1c2VyUHJvZmlsZURhdGEgPSBwcm9maWxlRGF0YSA/IHtcbiAgICAgICAgLi4ucHJvZmlsZURhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBjYWxvcmllTXVsdGlwbGllcjogMS4wLFxuICAgICAgICBmaXRuZXNzTGV2ZWw6IDAsXG4gICAgICAgIGxhc3RDYWxvcmllRmFjdG9yVXBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0gOiB7XG4gICAgICAgIG5pY2tuYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgICAgYWdlOiAzMCwgLy8gRGVmYXVsdCBhZ2VcbiAgICAgICAgZ2VuZGVyOiAncHJlZmVyLW5vdC10by1zYXknLCAvLyBEZWZhdWx0IGdlbmRlclxuICAgICAgICBoZWlnaHQ6IDE3MCwgLy8gRGVmYXVsdCBoZWlnaHQgaW4gY21cbiAgICAgICAgd2VpZ2h0OiA3MCwgLy8gRGVmYXVsdCB3ZWlnaHQgaW4ga2dcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGNhbG9yaWVNdWx0aXBsaWVyOiAxLjAsXG4gICAgICAgIGZpdG5lc3NMZXZlbDogMCxcbiAgICAgICAgbGFzdENhbG9yaWVGYWN0b3JVcGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gSWYgcHJvZmlsZSBkYXRhIGlzIHByb3ZpZGVkLCBjYWxjdWxhdGUgcGVyc29uYWxpemVkIGNhbG9yaWUgZmFjdG9yXG4gICAgICBpZiAocHJvZmlsZURhdGEpIHtcbiAgICAgICAgdXNlclByb2ZpbGVEYXRhLmNhbG9yaWVNdWx0aXBsaWVyID0gY2FsY3VsYXRlUGVyc29uYWxpemVkQ2Fsb3JpZUZhY3Rvcih7XG4gICAgICAgICAgLi4udXNlclByb2ZpbGVEYXRhLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTYXZlIGJvdGggZG9jdW1lbnRzXG4gICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLnVpZCk7XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZVJlZiA9IGRvYyhkYiwgJ3VzZXJQcm9maWxlcycsIHVzZXIudWlkKTtcbiAgICAgIFxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBzZXREb2ModXNlclJlZiwgdXNlckRhdGEpLFxuICAgICAgICBzZXREb2ModXNlclByb2ZpbGVSZWYsIHVzZXJQcm9maWxlRGF0YSlcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICBsb2dnZXIubG9nKCdVc2VyIGRvY3VtZW50cyBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyIH07XG4gICAgfSBjYXRjaCAoZmlyZXN0b3JlRXJyb3I6IGFueSkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHVzZXIgZG9jdW1lbnRzIGluIEZpcmVzdG9yZScsIGZpcmVzdG9yZUVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gU3RpbGwgcmV0dXJuIHN1Y2Nlc3Mgc2luY2UgdGhlIHVzZXIgd2FzIGNyZWF0ZWQgaW4gQXV0aGVudGljYXRpb25cbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgdXNlcixcbiAgICAgICAgd2FybmluZzogXCJVc2VyIHJlZ2lzdGVyZWQgYnV0IHByb2ZpbGUgZGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFBsZWFzZSB1cGRhdGUgeW91ciBwcm9maWxlLlwiIFxuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsb2dpblVzZXIgPSBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyOiB1c2VyQ3JlZGVudGlhbC51c2VyIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGxvZ291dFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc2lnbk91dChhdXRoKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufTtcblxuLy8gVXNlciBwcm9maWxlIGZ1bmN0aW9uc1xuZXhwb3J0IGNvbnN0IHNhdmVVc2VyUHJvZmlsZSA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsIFxuICBwcm9maWxlRGF0YTogeyBcbiAgICBuaWNrbmFtZTogc3RyaW5nOyBcbiAgICBhZ2U6IG51bWJlcjsgXG4gICAgZ2VuZGVyOiBzdHJpbmc7IFxuICAgIGhlaWdodDogbnVtYmVyOyBcbiAgICB3ZWlnaHQ6IG51bWJlcjtcbiAgfVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmxvZyhgU2F2aW5nIHVzZXIgcHJvZmlsZSBmb3IgVUlEOiAke3VzZXJJZH1gKTtcbiAgICBjb25zdCB1c2VyUHJvZmlsZVJlZiA9IGRvYyhkYiwgJ3VzZXJQcm9maWxlcycsIHVzZXJJZCk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBwZXJzb25hbGl6ZWQgY2Fsb3JpZSBmYWN0b3JcbiAgICBjb25zdCBjYWxvcmllTXVsdGlwbGllciA9IGNhbGN1bGF0ZVBlcnNvbmFsaXplZENhbG9yaWVGYWN0b3Ioe1xuICAgICAgLi4ucHJvZmlsZURhdGEsXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGZpdG5lc3NMZXZlbDogMFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAuLi5wcm9maWxlRGF0YSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY2Fsb3JpZU11bHRpcGxpZXIsXG4gICAgICBmaXRuZXNzTGV2ZWw6IDAsXG4gICAgICBsYXN0Q2Fsb3JpZUZhY3RvclVwZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBcbiAgICBhd2FpdCBzZXREb2ModXNlclByb2ZpbGVSZWYsIGRhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgbG9nZ2VyLmxvZygnVXNlciBwcm9maWxlIHNhdmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIFxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNhdmUgdXNlciBwcm9maWxlJywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlclByb2ZpbGUgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwcm9maWxlRG9jID0gYXdhaXQgZ2V0RG9jKGRvYyhkYiwgJ3VzZXJQcm9maWxlcycsIHVzZXJJZCkpO1xuICAgIFxuICAgIGlmIChwcm9maWxlRG9jLmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiBwcm9maWxlRG9jLmRhdGEoKSBhcyBVc2VyUHJvZmlsZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQcm9maWxlIG5vdCBmb3VuZCcsIHByb2ZpbGU6IG51bGwgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlLCBwcm9maWxlOiBudWxsIH07XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyUHJvZmlsZSA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsIFxuICBwcm9maWxlVXBkYXRlczogUGFydGlhbDxVc2VyUHJvZmlsZT5cbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJQcm9maWxlUmVmID0gZG9jKGRiLCAndXNlclByb2ZpbGVzJywgdXNlcklkKTtcbiAgICBjb25zdCB1c2VyUHJvZmlsZURvYyA9IGF3YWl0IGdldERvYyh1c2VyUHJvZmlsZVJlZik7XG4gICAgXG4gICAgaWYgKHVzZXJQcm9maWxlRG9jLmV4aXN0cygpKSB7XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHVzZXJQcm9maWxlRG9jLmRhdGEoKSBhcyBVc2VyUHJvZmlsZTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9maWxlID0ge1xuICAgICAgICAuLi51c2VyUHJvZmlsZSxcbiAgICAgICAgLi4ucHJvZmlsZVVwZGF0ZXMsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBSZWNhbGN1bGF0ZSBjYWxvcmllIG11bHRpcGxpZXIgd2hlbiBwcm9maWxlIGNoYW5nZXNcbiAgICAgIHVwZGF0ZWRQcm9maWxlLmNhbG9yaWVNdWx0aXBsaWVyID0gY2FsY3VsYXRlUGVyc29uYWxpemVkQ2Fsb3JpZUZhY3Rvcih1cGRhdGVkUHJvZmlsZSk7XG4gICAgICB1cGRhdGVkUHJvZmlsZS5sYXN0Q2Fsb3JpZUZhY3RvclVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJQcm9maWxlUmVmLCB1cGRhdGVkUHJvZmlsZSk7XG4gICAgICBsb2dnZXIubG9nKCdVc2VyIHByb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgcHJvZmlsZSBub3QgZm91bmQnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlciBwcm9maWxlJywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICB9XG59O1xuXG4vLyBDdXN0b20gaG9vayBmb3IgYXV0aCBzdGF0ZVxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIChjdXJyZW50VXNlcikgPT4ge1xuICAgICAgc2V0VXNlcihjdXJyZW50VXNlcik7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0sIFtdKTtcbiAgXG4gIHJldHVybiB7IHVzZXIsIGxvYWRpbmcgfTtcbn07XG5cbi8vIEZpcmVzdG9yZSBmdW5jdGlvbnMgZm9yIHdvcmtvdXQgZGF0YVxuZXhwb3J0IGNvbnN0IHNhdmVXb3Jrb3V0VG9GaXJlc3RvcmUgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLCBcbiAgZGF0ZTogc3RyaW5nLCBcbiAgcmVzdWx0czogYW55W10sIFxuICBzdW1tYXJ5RGF0YT86IHtcbiAgICB0b3RhbENhbG9yaWVzQnVybmVkOiBudW1iZXI7XG4gICAgZHVyYXRpb25TZWNvbmRzOiBudW1iZXI7XG4gICAgd29ya291dElkPzogc3RyaW5nO1xuICB9XG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBTdGFydGluZyB0byBzYXZlIHdvcmtvdXQgdG8gRmlyZXN0b3JlIGZvciB1c2VyOicsIHVzZXJJZCk7XG4gICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gV29ya291dCBkYXRhOicsIHsgZGF0ZSwgcmVzdWx0c0NvdW50OiByZXN1bHRzLmxlbmd0aCwgc3VtbWFyeURhdGEgfSk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRzXG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghZGF0ZSkgdGhyb3cgbmV3IEVycm9yKCdEYXRlIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFyZXN1bHRzIHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdHMpKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3VsdHMgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdSZXN1bHRzIGFycmF5IGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIEZpcmViYXNlIGlzIHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAgaWYgKCFkYikge1xuICAgICAgY29uc29sZS5lcnJvcignW0ZpcmViYXNlXSBGaXJlc3RvcmUgbm90IGluaXRpYWxpemVkIScpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBkYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aXZpdHlcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gVGVzdGluZyBkYXRhYmFzZSBjb25uZWN0aXZpdHkuLi4nKTtcbiAgICAgIGNvbnN0IHRlc3RSZWYgPSBkb2MoZGIsICdjb25uZWN0aW9uVGVzdCcsICd0ZXN0Jyk7XG4gICAgICBhd2FpdCBzZXREb2ModGVzdFJlZiwgeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9LCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gRGF0YWJhc2UgY29ubmVjdGlvbiBzdWNjZXNzZnVsJyk7XG4gICAgfSBjYXRjaCAoY29ubkVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRGF0YWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZDonLCBjb25uRXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDogJHtjb25uRXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHVzZXIgcHJvZmlsZSB0byBhcHBseSBjYWxvcmllIG11bHRpcGxpZXJcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBGZXRjaGluZyB1c2VyIHByb2ZpbGUuLi4nKTtcbiAgICBjb25zdCBwcm9maWxlUmVzdWx0ID0gYXdhaXQgZ2V0VXNlclByb2ZpbGUodXNlcklkKTtcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVc2VyIHByb2ZpbGUgZmV0Y2ggcmVzdWx0OicsIHByb2ZpbGVSZXN1bHQuc3VjY2Vzcyk7XG4gICAgXG4gICAgY29uc3QgY2Fsb3JpZU11bHRpcGxpZXIgPSBwcm9maWxlUmVzdWx0LnN1Y2Nlc3MgJiYgcHJvZmlsZVJlc3VsdC5wcm9maWxlIFxuICAgICAgPyBwcm9maWxlUmVzdWx0LnByb2ZpbGUuY2Fsb3JpZU11bHRpcGxpZXIgfHwgMS4wXG4gICAgICA6IDEuMDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVc2luZyBjYWxvcmllIG11bHRpcGxpZXI6JywgY2Fsb3JpZU11bHRpcGxpZXIpO1xuICAgIFxuICAgIC8vIEFwcGx5IGNhbG9yaWUgbXVsdGlwbGllciB0byBlYWNoIGV4ZXJjaXNlIHJlc3VsdFxuICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEFwcGx5aW5nIGNhbG9yaWUgbXVsdGlwbGllciB0byByZXN1bHRzJyk7XG4gICAgY29uc3QgcmVzdWx0c1dpdGhDYWxvcmllcyA9IHJlc3VsdHMubWFwKHJlc3VsdCA9PiB7XG4gICAgICBpZiAocmVzdWx0LmNhbG9yaWVzQnVybmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgIGNhbG9yaWVzQnVybmVkOiBNYXRoLnJvdW5kKHJlc3VsdC5jYWxvcmllc0J1cm5lZCAqIGNhbG9yaWVNdWx0aXBsaWVyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSB3b3Jrb3V0IElEIGlmIG5vdCBwcm92aWRlZFxuICAgIGNvbnN0IHdvcmtvdXRJZCA9IHN1bW1hcnlEYXRhPy53b3Jrb3V0SWQgfHwgYCR7ZGF0ZX0tJHtEYXRlLm5vdygpfWA7XG4gICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gVXNpbmcgd29ya291dCBJRDonLCB3b3Jrb3V0SWQpO1xuICAgIFxuICAgIC8vIFByZXBhcmUgdGhlIHdvcmtvdXQgZGF0YSB3aXRoIG9wdGlvbmFsIHN1bW1hcnlcbiAgICBjb25zdCB3b3Jrb3V0RGF0YTogYW55ID0geyBcbiAgICAgIGRhdGUsIFxuICAgICAgd29ya291dElkLFxuICAgICAgcmVzdWx0czogcmVzdWx0c1dpdGhDYWxvcmllcyxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIC8vIEFkZCBzdW1tYXJ5IGRhdGEgaWYgcHJvdmlkZWRcbiAgICBpZiAoc3VtbWFyeURhdGEpIHtcbiAgICAgIHdvcmtvdXREYXRhLnN1bW1hcnkgPSB7XG4gICAgICAgIHRvdGFsQ2Fsb3JpZXNCdXJuZWQ6IE1hdGgucm91bmQoc3VtbWFyeURhdGEudG90YWxDYWxvcmllc0J1cm5lZCAqIGNhbG9yaWVNdWx0aXBsaWVyKSxcbiAgICAgICAgZHVyYXRpb25TZWNvbmRzOiBzdW1tYXJ5RGF0YS5kdXJhdGlvblNlY29uZHMsXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBmb3JtYXREdXJhdGlvbihzdW1tYXJ5RGF0YS5kdXJhdGlvblNlY29uZHMpXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgYSBkaWZmZXJlbnQgYXBwcm9hY2ggLSB3cml0ZSBkaXJlY3RseSB0byBhIHdvcmtvdXQgY29sbGVjdGlvblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBUcnlpbmcgZGlyZWN0IHdvcmtvdXQgc2F2ZSBhcHByb2FjaC4uLicpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSB3b3Jrb3V0IGRvY3VtZW50IGluIGEgd29ya291dHMgY29sbGVjdGlvblxuICAgICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3dvcmtvdXRzJywgd29ya291dElkKTtcbiAgICAgIGNvbnN0IGZ1bGxXb3Jrb3V0RGF0YSA9IHtcbiAgICAgICAgLi4ud29ya291dERhdGEsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGF3YWl0IHNldERvYyh3b3Jrb3V0UmVmLCBmdWxsV29ya291dERhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gU3VjY2Vzc2Z1bGx5IHNhdmVkIHdvcmtvdXQgZGlyZWN0bHkgdG8gd29ya291dHMgY29sbGVjdGlvbicpO1xuICAgICAgXG4gICAgICAvLyBBbHNvIGNyZWF0ZSBhIHVzZXItd29ya291dHMgcmVmZXJlbmNlXG4gICAgICBjb25zdCB1c2VyV29ya291dFJlZiA9IGRvYyhkYiwgYHVzZXJzLyR7dXNlcklkfS93b3Jrb3V0c2AsIHdvcmtvdXRJZCk7XG4gICAgICBhd2FpdCBzZXREb2ModXNlcldvcmtvdXRSZWYsIGZ1bGxXb3Jrb3V0RGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBTdWNjZXNzZnVsbHkgc2F2ZWQgd29ya291dCB0byB1c2VyIHdvcmtvdXRzIHN1YmNvbGxlY3Rpb24nKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSB1c2VyJ3MgZml0bmVzcyBsZXZlbFxuICAgICAgaWYgKHByb2ZpbGVSZXN1bHQuc3VjY2VzcyAmJiBwcm9maWxlUmVzdWx0LnByb2ZpbGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVcGRhdGluZyBmaXRuZXNzIGxldmVsJyk7XG4gICAgICAgICAgYXdhaXQgdXBkYXRlRml0bmVzc0xldmVsKHVzZXJJZCwgcHJvZmlsZVJlc3VsdC5wcm9maWxlLmZpdG5lc3NMZXZlbCB8fCAwKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBGaXRuZXNzIGxldmVsIHVwZGF0ZWQnKTtcbiAgICAgICAgfSBjYXRjaCAoZml0bmVzc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdbRmlyZWJhc2VdIEVycm9yIHVwZGF0aW5nIGZpdG5lc3MgbGV2ZWwgKG5vbi1jcml0aWNhbCk6JywgZml0bmVzc0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB3b3Jrb3V0SWQgfTtcbiAgICB9IGNhdGNoIChkaXJlY3RTYXZlRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignW0ZpcmViYXNlXSBEaXJlY3Qgc2F2ZSBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byB1c2VyIGRvY3VtZW50IHVwZGF0ZTonLCBkaXJlY3RTYXZlRXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgdG8gdGhlIG9yaWdpbmFsIGFwcHJvYWNoIGJlbG93XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEdldHRpbmcgdXNlciBkb2N1bWVudC4uLicpO1xuICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XG4gICAgXG4gICAgLy8gUmV0cnkgbWVjaGFuaXNtIGZvciBGaXJlc3RvcmUgb3BlcmF0aW9uc1xuICAgIGxldCByZXRyaWVzID0gMDtcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gMztcbiAgICBsZXQgdXNlckRvYztcbiAgICBcbiAgICB3aGlsZSAocmV0cmllcyA8IG1heFJldHJpZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVzZXJEb2MgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0cmllcysrO1xuICAgICAgICBjb25zb2xlLndhcm4oYFtGaXJlYmFzZV0gRXJyb3IgZ2V0dGluZyB1c2VyIGRvY3VtZW50IChhdHRlbXB0ICR7cmV0cmllc30vJHttYXhSZXRyaWVzfSk6YCwgZXJyb3IpO1xuICAgICAgICBpZiAocmV0cmllcyA+PSBtYXhSZXRyaWVzKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgLy8gV2FpdCBiZWZvcmUgcmV0cnlpbmdcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKCF1c2VyRG9jIHx8ICF1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRmlyZWJhc2VdIFVzZXIgZG9jdW1lbnQgbm90IGZvdW5kIGZvciBJRDonLCB1c2VySWQpO1xuICAgICAgXG4gICAgICAvLyBBcyBhIGZhbGxiYWNrLCB0cnkgdG8gY3JlYXRlIHRoZSBkb2N1bWVudCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBBdHRlbXB0aW5nIHRvIGNyZWF0ZSB1c2VyIGRvY3VtZW50IGFzIGZhbGxiYWNrJyk7XG4gICAgICAgIGF3YWl0IHNldERvYyh1c2VyUmVmLCB7XG4gICAgICAgICAgd29ya291dHM6IFt3b3Jrb3V0RGF0YV0sICAvLyBJbml0aWFsaXplIHdpdGggdGhlIGN1cnJlbnQgd29ya291dFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBTdWNjZXNzZnVsbHkgY3JlYXRlZCB1c2VyIGRvY3VtZW50IHdpdGggd29ya291dCBkYXRhJyk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHdvcmtvdXRJZCB9O1xuICAgICAgfSBjYXRjaCAoY3JlYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0ZpcmViYXNlXSBGYWlsZWQgdG8gY3JlYXRlIGZhbGxiYWNrIHVzZXIgZG9jdW1lbnQ6JywgY3JlYXRlRXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZG9jdW1lbnQgbm90IGZvdW5kIGFuZCBjb3VsZCBub3QgYmUgY3JlYXRlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVc2VyIGRvY3VtZW50IGV4aXN0cywgcHJvY2VlZGluZyB0byB1cGRhdGUnKTtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpO1xuICAgIGNvbnN0IHdvcmtvdXRzID0gdXNlckRhdGEud29ya291dHMgfHwgW107XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd29ya291dCBmb3IgdGhpcyBkYXRlIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nV29ya291dEluZGV4ID0gd29ya291dHMuZmluZEluZGV4KCh3OiBhbnkpID0+IHcud29ya291dElkID09PSB3b3Jrb3V0SWQpO1xuICAgIFxuICAgIGlmIChleGlzdGluZ1dvcmtvdXRJbmRleCAhPT0gLTEpIHtcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB3b3Jrb3V0XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVcGRhdGluZyBleGlzdGluZyB3b3Jrb3V0IHdpdGggSUQ6Jywgd29ya291dElkKTtcbiAgICAgIHdvcmtvdXRzW2V4aXN0aW5nV29ya291dEluZGV4XSA9IHdvcmtvdXREYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBZGQgbmV3IHdvcmtvdXRcbiAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEFkZGluZyBuZXcgd29ya291dCB3aXRoIElEOicsIHdvcmtvdXRJZCk7XG4gICAgICB3b3Jrb3V0cy5wdXNoKHdvcmtvdXREYXRhKTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVwZGF0ZSB1c2VyIGRvY3VtZW50XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVcGRhdGluZyB1c2VyIGRvY3VtZW50IHdpdGggd29ya291dCBkYXRhLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIFVzZSBhIHRyYW5zYWN0aW9uIHRvIGVuc3VyZSBhdG9taWMgdXBkYXRlc1xuICAgICAgcmV0cmllcyA9IDA7XG4gICAgICB3aGlsZSAocmV0cmllcyA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclJlZiwgeyBcbiAgICAgICAgICAgIHdvcmtvdXRzLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIFVzZXIgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgICByZXRyaWVzKys7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBbRmlyZWJhc2VdIEVycm9yIHVwZGF0aW5nIHVzZXIgZG9jdW1lbnQgKGF0dGVtcHQgJHtyZXRyaWVzfS8ke21heFJldHJpZXN9KTpgLCB1cGRhdGVFcnJvcik7XG4gICAgICAgICAgaWYgKHJldHJpZXMgPj0gbWF4UmV0cmllcykgdGhyb3cgdXBkYXRlRXJyb3I7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdXNlcidzIGZpdG5lc3MgbGV2ZWxcbiAgICAgIGlmIChwcm9maWxlUmVzdWx0LnN1Y2Nlc3MgJiYgcHJvZmlsZVJlc3VsdC5wcm9maWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIFVwZGF0aW5nIGZpdG5lc3MgbGV2ZWwnKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB1cGRhdGVGaXRuZXNzTGV2ZWwodXNlcklkLCBwcm9maWxlUmVzdWx0LnByb2ZpbGUuZml0bmVzc0xldmVsIHx8IDApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEZpdG5lc3MgbGV2ZWwgdXBkYXRlZCcpO1xuICAgICAgICB9IGNhdGNoIChmaXRuZXNzRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tGaXJlYmFzZV0gRXJyb3IgdXBkYXRpbmcgZml0bmVzcyBsZXZlbCAobm9uLWNyaXRpY2FsKTonLCBmaXRuZXNzRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSB0aGUgdXBkYXRlIHdhcyBzdWNjZXNzZnVsIGJ5IHJlYWRpbmcgYmFjayB0aGUgZGF0YVxuICAgICAgY29uc3QgdmVyaWZ5RG9jID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xuICAgICAgaWYgKHZlcmlmeURvYy5leGlzdHMoKSkge1xuICAgICAgICBjb25zdCB2ZXJpZnlEYXRhID0gdmVyaWZ5RG9jLmRhdGEoKTtcbiAgICAgICAgaWYgKHZlcmlmeURhdGEud29ya291dHMgJiYgdmVyaWZ5RGF0YS53b3Jrb3V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gVmVyaWZpZWQgd29ya291dCBkYXRhIHdhcyBzYXZlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB3b3Jrb3V0SWQgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tGaXJlYmFzZV0gV29ya291dCBkYXRhIG1pZ2h0IG5vdCBoYXZlIGJlZW4gc2F2ZWQgY29ycmVjdGx5Jyk7XG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgd2FybmluZzogJ0RhdGEgbWlnaHQgbm90IGhhdmUgYmVlbiBzYXZlZCBjb3JyZWN0bHknLCB3b3Jrb3V0SWQgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB3b3Jrb3V0SWQgfTtcbiAgICB9IGNhdGNoICh1cGRhdGVFcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRmlyZWJhc2VdIEVycm9yIHVwZGF0aW5nIHVzZXIgZG9jdW1lbnQ6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIGRvY3VtZW50OiAke3VwZGF0ZUVycm9yLm1lc3NhZ2V9YCB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3Igc2F2aW5nIHdvcmtvdXQ6JywgZXJyb3IpO1xuICAgIFxuICAgIC8vIFRyeSB0byBzYXZlIHRvIGxvY2FsU3RvcmFnZSBhcyBmYWxsYmFja1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBBdHRlbXB0aW5nIHRvIHNhdmUgdG8gbG9jYWxTdG9yYWdlIGFzIGZhbGxiYWNrJyk7XG4gICAgICBjb25zdCB3b3Jrb3V0RGF0YSA9IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkYXRlLFxuICAgICAgICByZXN1bHRzLFxuICAgICAgICBzdW1tYXJ5RGF0YSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEdldCBleGlzdGluZyBiYWNrdXAgZGF0YSBvciBpbml0aWFsaXplXG4gICAgICBjb25zdCBleGlzdGluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3b3Jrb3V0QmFja3VwJykgfHwgJ1tdJztcbiAgICAgIGNvbnN0IGJhY2t1cERhdGEgPSBKU09OLnBhcnNlKGV4aXN0aW5nKTtcbiAgICAgIGJhY2t1cERhdGEucHVzaCh3b3Jrb3V0RGF0YSk7XG4gICAgICBcbiAgICAgIC8vIFNhdmUgYmFjayB0byBsb2NhbFN0b3JhZ2VcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd3b3Jrb3V0QmFja3VwJywgSlNPTi5zdHJpbmdpZnkoYmFja3VwRGF0YSkpO1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gV29ya291dCBkYXRhIHNhdmVkIHRvIGxvY2FsU3RvcmFnZSBhcyBiYWNrdXAnKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6IGAke2Vycm9yLm1lc3NhZ2V9IChCdXQgZGF0YSB3YXMgYmFja2VkIHVwIGxvY2FsbHkpYCxcbiAgICAgICAgZmFsbGJhY2tVc2VkOiB0cnVlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRmFpbGVkIHRvIHNhdmUgZmFsbGJhY2sgZGF0YTonLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgIH1cbiAgfVxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGZvcm1hdCBkdXJhdGlvbiBpbiBzZWNvbmRzIHRvIHJlYWRhYmxlIGZvcm1hdFxuZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgY29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IHNlY29uZHMgJSA2MDtcbiAgcmV0dXJuIGAke21pbnV0ZXN9bSAke3JlbWFpbmluZ1NlY29uZHN9c2A7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyV29ya291dHMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBHZXR0aW5nIHdvcmtvdXRzIGZvciB1c2VyOicsIHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gZ2V0VXNlcldvcmtvdXRzIGNhbGxlZCB3aXRoIGVtcHR5IHVzZXJJZCcpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVXNlciBJRCBpcyByZXF1aXJlZCcsIHdvcmtvdXRzOiBbXSB9O1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWRiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRmlyZWJhc2VdIEZpcmVzdG9yZSBub3QgaW5pdGlhbGl6ZWQgaW4gZ2V0VXNlcldvcmtvdXRzJyk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGaXJlYmFzZSBub3QgaW5pdGlhbGl6ZWQnLCB3b3Jrb3V0czogW10gfTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJ5IG11bHRpcGxlIGFwcHJvYWNoZXMgdG8gZ2V0IHRoZSB3b3Jrb3V0IGRhdGFcbiAgICBsZXQgYWxsV29ya291dHM6IGFueVtdID0gW107XG4gICAgbGV0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBBcHByb2FjaCAxOiBDaGVjayBkaXJlY3Qgd29ya291dHMgY29sbGVjdGlvblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBDaGVja2luZyB3b3Jrb3V0cyBjb2xsZWN0aW9uLi4uJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3dvcmtvdXRzJyksIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcbiAgICAgIGNvbnN0IHdvcmtvdXRzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgXG4gICAgICBpZiAoIXdvcmtvdXRzU25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0V29ya291dHMgPSB3b3Jrb3V0c1NuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkb2MuZGF0YSgpKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtGaXJlYmFzZV0gRm91bmQgJHtkaXJlY3RXb3Jrb3V0cy5sZW5ndGh9IHdvcmtvdXRzIGluIHdvcmtvdXRzIGNvbGxlY3Rpb25gKTtcbiAgICAgICAgYWxsV29ya291dHMgPSBbLi4uYWxsV29ya291dHMsIC4uLmRpcmVjdFdvcmtvdXRzXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIE5vIHdvcmtvdXRzIGZvdW5kIGluIHdvcmtvdXRzIGNvbGxlY3Rpb24nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChkaXJlY3RFcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbRmlyZWJhc2VdIEVycm9yIGZldGNoaW5nIGZyb20gd29ya291dHMgY29sbGVjdGlvbjonLCBkaXJlY3RFcnJvcik7XG4gICAgICBlcnJvcnMucHVzaChgRXJyb3IgZmV0Y2hpbmcgZnJvbSB3b3Jrb3V0cyBjb2xsZWN0aW9uOiAke2RpcmVjdEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFwcHJvYWNoIDI6IENoZWNrIHVzZXItd29ya291dHMgc3ViY29sbGVjdGlvblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBDaGVja2luZyB1c2VyIHdvcmtvdXRzIHN1YmNvbGxlY3Rpb24uLi4nKTtcbiAgICAgIGNvbnN0IHVzZXJXb3Jrb3V0c1JlZiA9IGNvbGxlY3Rpb24oZGIsIGB1c2Vycy8ke3VzZXJJZH0vd29ya291dHNgKTtcbiAgICAgIGNvbnN0IHVzZXJXb3Jrb3V0c1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh1c2VyV29ya291dHNSZWYpO1xuICAgICAgXG4gICAgICBpZiAoIXVzZXJXb3Jrb3V0c1NuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIGNvbnN0IHN1YmNvbGxlY3Rpb25Xb3Jrb3V0cyA9IHVzZXJXb3Jrb3V0c1NuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkb2MuZGF0YSgpKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtGaXJlYmFzZV0gRm91bmQgJHtzdWJjb2xsZWN0aW9uV29ya291dHMubGVuZ3RofSB3b3Jrb3V0cyBpbiB1c2VyIHN1YmNvbGxlY3Rpb25gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbHRlciBvdXQgYW55IGR1cGxpY2F0ZXMgKGJ5IHdvcmtvdXRJZCkgdGhhdCBtaWdodCBhbHJlYWR5IGJlIGluIGFsbFdvcmtvdXRzXG4gICAgICAgIGNvbnN0IG5ld1dvcmtvdXRzID0gc3ViY29sbGVjdGlvbldvcmtvdXRzLmZpbHRlcihuZXdXb3Jrb3V0ID0+IFxuICAgICAgICAgICFhbGxXb3Jrb3V0cy5zb21lKGV4aXN0aW5nID0+IGV4aXN0aW5nLndvcmtvdXRJZCA9PT0gbmV3V29ya291dC53b3Jrb3V0SWQpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBhbGxXb3Jrb3V0cyA9IFsuLi5hbGxXb3Jrb3V0cywgLi4ubmV3V29ya291dHNdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gTm8gd29ya291dHMgZm91bmQgaW4gdXNlciBzdWJjb2xsZWN0aW9uJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoc3ViY29sbGVjdGlvbkVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3IgZmV0Y2hpbmcgZnJvbSB1c2VyIHdvcmtvdXRzIHN1YmNvbGxlY3Rpb246Jywgc3ViY29sbGVjdGlvbkVycm9yKTtcbiAgICAgIGVycm9ycy5wdXNoKGBFcnJvciBmZXRjaGluZyBmcm9tIHVzZXIgd29ya291dHMgc3ViY29sbGVjdGlvbjogJHtzdWJjb2xsZWN0aW9uRXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQXBwcm9hY2ggMzogQ2hlY2sgdGhlIG9yaWdpbmFsIHN0b3JhZ2UgbG9jYXRpb24gKHVzZXIgZG9jdW1lbnQncyB3b3Jrb3V0cyBhcnJheSlcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gQ2hlY2tpbmcgdXNlciBkb2N1bWVudCBmb3Igd29ya291dHMgYXJyYXkuLi4nKTtcbiAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XG4gICAgICBjb25zdCB1c2VyRG9jID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xuICAgICAgXG4gICAgICBpZiAodXNlckRvYy5leGlzdHMoKSkge1xuICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpO1xuICAgICAgICBpZiAodXNlckRhdGEud29ya291dHMgJiYgQXJyYXkuaXNBcnJheSh1c2VyRGF0YS53b3Jrb3V0cykgJiYgdXNlckRhdGEud29ya291dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbRmlyZWJhc2VdIEZvdW5kICR7dXNlckRhdGEud29ya291dHMubGVuZ3RofSB3b3Jrb3V0cyBpbiB1c2VyIGRvY3VtZW50YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlsdGVyIG91dCBhbnkgZHVwbGljYXRlcyBieSB3b3Jrb3V0SWQgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgYnkgZGF0ZVxuICAgICAgICAgIGNvbnN0IG5ld1dvcmtvdXRzID0gdXNlckRhdGEud29ya291dHMuZmlsdGVyKG5ld1dvcmtvdXQgPT4ge1xuICAgICAgICAgICAgaWYgKG5ld1dvcmtvdXQud29ya291dElkKSB7XG4gICAgICAgICAgICAgIHJldHVybiAhYWxsV29ya291dHMuc29tZShleGlzdGluZyA9PiBleGlzdGluZy53b3Jrb3V0SWQgPT09IG5ld1dvcmtvdXQud29ya291dElkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAhYWxsV29ya291dHMuc29tZShleGlzdGluZyA9PiBleGlzdGluZy5kYXRlID09PSBuZXdXb3Jrb3V0LmRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGFsbFdvcmtvdXRzID0gWy4uLmFsbFdvcmtvdXRzLCAuLi5uZXdXb3Jrb3V0c107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gTm8gd29ya291dHMgZm91bmQgaW4gdXNlciBkb2N1bWVudCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBVc2VyIGRvY3VtZW50IG5vdCBmb3VuZCwgc2tpcHBpbmcgd29ya291dHMgYXJyYXkgY2hlY2snKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoICh1c2VyRG9jRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignW0ZpcmViYXNlXSBFcnJvciBmZXRjaGluZyBmcm9tIHVzZXIgZG9jdW1lbnQ6JywgdXNlckRvY0Vycm9yKTtcbiAgICAgIGVycm9ycy5wdXNoKGBFcnJvciBmZXRjaGluZyBmcm9tIHVzZXIgZG9jdW1lbnQ6ICR7dXNlckRvY0Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJldHVybiByZXN1bHRzXG4gICAgY29uc29sZS5sb2coYFtGaXJlYmFzZV0gVG90YWwgd29ya291dHMgZm91bmQgYWNyb3NzIGFsbCBsb2NhdGlvbnM6ICR7YWxsV29ya291dHMubGVuZ3RofWApO1xuICAgIFxuICAgIGlmIChhbGxXb3Jrb3V0cy5sZW5ndGggPT09IDAgJiYgZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIElmIHdlIGZvdW5kIG5vIHdvcmtvdXRzIGFuZCBoYWQgZXJyb3JzLCB0cnkgY2hlY2tpbmcgbG9jYWxTdG9yYWdlIGJhY2t1cFxuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gTm8gd29ya291dHMgZm91bmQgaW4gRmlyZXN0b3JlLCBjaGVja2luZyBiYWNrdXAgaW4gbG9jYWxTdG9yYWdlJyk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRCYWNrdXBzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3dvcmtvdXRCYWNrdXBzJyk7XG4gICAgICAgIGlmICh3b3Jrb3V0QmFja3Vwcykge1xuICAgICAgICAgIGNvbnN0IGJhY2t1cERhdGEgPSBKU09OLnBhcnNlKHdvcmtvdXRCYWNrdXBzKTtcbiAgICAgICAgICBjb25zdCB1c2VyQmFja3VwcyA9IGJhY2t1cERhdGEuZmlsdGVyKCh3b3Jrb3V0OiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB3b3Jrb3V0LnVzZXJJZCA9PT0gdXNlcklkIHx8IChcbiAgICAgICAgICAgICAgd29ya291dC5yZXN1bHRzICYmIHdvcmtvdXQucmVzdWx0cy5sZW5ndGggPiAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh1c2VyQmFja3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZpcmViYXNlXSBGb3VuZCAke3VzZXJCYWNrdXBzLmxlbmd0aH0gd29ya291dHMgaW4gbG9jYWxTdG9yYWdlIGJhY2t1cGApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgd29ya291dHM6IHVzZXJCYWNrdXBzLFxuICAgICAgICAgICAgICB3YXJuaW5nczogWydVc2luZyB3b3Jrb3V0IGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2UgYmFja3VwJywgLi4uZXJyb3JzXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGJhY2t1cEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3IgY2hlY2tpbmcgbG9jYWxTdG9yYWdlIGJhY2t1cDonLCBiYWNrdXBFcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSB3b3Jrb3V0cyBmcm9tIGFsbCBzb3VyY2VzJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3JzLFxuICAgICAgICB3b3Jrb3V0czogW11cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFNvcnQgd29ya291dHMgYnkgZGF0ZSAobmV3ZXN0IGZpcnN0KVxuICAgIGNvbnN0IHNvcnRlZFdvcmtvdXRzID0gWy4uLmFsbFdvcmtvdXRzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBJZiB0aW1lc3RhbXAgZXhpc3RzLCB1c2UgaXQgZm9yIG1vc3QgYWNjdXJhdGUgc29ydGluZ1xuICAgICAgaWYgKGEuY3JlYXRlZEF0ICYmIGIuY3JlYXRlZEF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5jcmVhdGVkQXQpLmdldFRpbWUoKTtcbiAgICAgIH1cbiAgICAgIC8vIE90aGVyd2lzZSBmYWxsIGJhY2sgdG8gZGF0ZVxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5kYXRlKS5nZXRUaW1lKCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gTG9nIHRoZSBkYXRlcyBvZiB0aGUgd29ya291dHMgdG8gaGVscCBkZWJ1Z1xuICAgIGlmIChzb3J0ZWRXb3Jrb3V0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBXb3Jrb3V0IGRhdGVzOicsIHNvcnRlZFdvcmtvdXRzLm1hcCh3ID0+IHcuZGF0ZSkuam9pbignLCAnKSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgd29ya291dHM6IHNvcnRlZFdvcmtvdXRzLFxuICAgICAgd2FybmluZ3M6IGVycm9ycy5sZW5ndGggPiAwID8gZXJyb3JzIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3IgZ2V0dGluZyB3b3Jrb3V0czonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gVHJ5IHRvIGNoZWNrIGZvciBiYWNrdXAgZGF0YSBpbiBsb2NhbFN0b3JhZ2VcbiAgICB0cnkge1xuICAgICAgY29uc3QgYmFja3VwRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3b3Jrb3V0QmFja3VwJyk7XG4gICAgICBpZiAoYmFja3VwRGF0YSkge1xuICAgICAgICBjb25zdCBwYXJzZWRCYWNrdXAgPSBKU09OLnBhcnNlKGJhY2t1cERhdGEpO1xuICAgICAgICBjb25zdCB1c2VyQmFja3VwcyA9IHBhcnNlZEJhY2t1cC5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodXNlckJhY2t1cHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEZvdW5kIGJhY2t1cCB3b3Jrb3V0IGRhdGEgaW4gbG9jYWxTdG9yYWdlOicsIHVzZXJCYWNrdXBzLmxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgICAgIHdvcmtvdXRzOiB1c2VyQmFja3Vwcy5tYXAoKGl0ZW06IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgZGF0ZTogaXRlbS5kYXRlLFxuICAgICAgICAgICAgICByZXN1bHRzOiBpdGVtLnJlc3VsdHMsXG4gICAgICAgICAgICAgIHN1bW1hcnk6IGl0ZW0uc3VtbWFyeURhdGFcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHVzaW5nQmFja3VwOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbHNvIGNoZWNrIHRoZSBvdGhlciBiYWNrdXAgZm9ybWF0XG4gICAgICBjb25zdCB3b3Jrb3V0QmFja3VwcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3b3Jrb3V0QmFja3VwcycpO1xuICAgICAgaWYgKHdvcmtvdXRCYWNrdXBzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFdvcmtvdXRCYWNrdXBzID0gSlNPTi5wYXJzZSh3b3Jrb3V0QmFja3Vwcyk7XG4gICAgICAgIGlmIChwYXJzZWRXb3Jrb3V0QmFja3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gRm91bmQgYmFja3VwIHdvcmtvdXQgZGF0YSBpbiB3b3Jrb3V0QmFja3VwczonLCBwYXJzZWRXb3Jrb3V0QmFja3Vwcy5sZW5ndGgpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgd29ya291dHM6IHBhcnNlZFdvcmtvdXRCYWNrdXBzLFxuICAgICAgICAgICAgdXNpbmdCYWNrdXA6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoYmFja3VwRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3IgY2hlY2tpbmcgYmFja3VwIGRhdGE6JywgYmFja3VwRXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIHdvcmtvdXRzOiBbXSB9O1xuICB9XG59O1xuXG4vLyBGdW5jdGlvbiB0byBjYWxjdWxhdGUgY2Fsb3JpZXMgYnVybmVkIGJhc2VkIG9uIGV4ZXJjaXNlIHR5cGUsIHJlcCBjb3VudCwgYW5kIHVzZXIgd2VpZ2h0XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlQ2Fsb3JpZXNCdXJuZWQgPSAoZXhlcmNpc2VUeXBlOiBzdHJpbmcsIHJlcHM6IG51bWJlciwgdXNlcldlaWdodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKGV4ZXJjaXNlVHlwZSA9PT0gJ3dvcmtvdXRfZW5kJyB8fCBleGVyY2lzZVR5cGUgPT09ICd3b3Jrb3V0LWVuZCcpIHtcbiAgICByZXR1cm4gMDsgLy8gTm8gY2Fsb3JpZXMgZm9yIHdvcmtvdXQgZW5kIG1hcmtlclxuICB9XG4gIFxuICAvLyBCYXNlIGNhbG9yaWVzIHBlciByZXAgZm9yIGEgcGVyc29uIHdlaWdoaW5nIDcwa2dcbiAgY29uc3QgY2Fsb3JpZXNQZXJSZXBCYXNlOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfSA9IHtcbiAgICAnYnVycGVlcyc6IDAuNSxcbiAgICAnc3F1YXRzJzogMC4zMixcbiAgICAnaGlnaF9rbmVlcyc6IDAuMixcbiAgICAnbW91bnRhaW5fY2xpbWJlcnMnOiAwLjI1LFxuICAgICdqdW1waW5nX2phY2tzJzogMC4yXG4gIH07XG4gIFxuICAvLyBEZWZhdWx0IHRvIHNxdWF0cyBpZiBleGVyY2lzZSB0eXBlIG5vdCBmb3VuZFxuICBjb25zdCBjYWxvcmllc1BlclJlcCA9IGNhbG9yaWVzUGVyUmVwQmFzZVtleGVyY2lzZVR5cGVdIHx8IGNhbG9yaWVzUGVyUmVwQmFzZVsnc3F1YXRzJ107XG4gIFxuICAvLyBBZGp1c3QgYmFzZWQgb24gd2VpZ2h0IChzaW1wbGlmaWVkIGxpbmVhciBhZGp1c3RtZW50KVxuICBjb25zdCB3ZWlnaHRGYWN0b3IgPSB1c2VyV2VpZ2h0IC8gNzA7XG4gIFxuICAvLyBDYWxjdWxhdGUgdG90YWwgY2Fsb3JpZXMgYW5kIHJvdW5kIHRvIDEgZGVjaW1hbCBwbGFjZVxuICByZXR1cm4gTWF0aC5yb3VuZChjYWxvcmllc1BlclJlcCAqIHJlcHMgKiB3ZWlnaHRGYWN0b3IgKiAxMCkgLyAxMDtcbn07XG5cbmV4cG9ydCB7IGF1dGgsIGRiIH07ICJdLCJuYW1lcyI6WyJpbml0aWFsaXplQXBwIiwiZ2V0QXV0aCIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbk91dCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImdldEZpcmVzdG9yZSIsImNvbGxlY3Rpb24iLCJkb2MiLCJzZXREb2MiLCJnZXREb2MiLCJ1cGRhdGVEb2MiLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwibG9nZ2VyIiwiZ2V0QXBwcyIsImNhbGN1bGF0ZUJNUiIsIndlaWdodCIsImhlaWdodCIsImFnZSIsImdlbmRlciIsInRvTG93ZXJDYXNlIiwiZ2V0QXZlcmFnZUJNUiIsImNhbGN1bGF0ZVBlcnNvbmFsaXplZENhbG9yaWVGYWN0b3IiLCJwcm9maWxlIiwiYm1yIiwiYmFzZUJNUkZhY3RvciIsImFnZUZhY3RvciIsIk1hdGgiLCJtYXgiLCJibWkiLCJwb3ciLCJibWlBZGp1c3RtZW50IiwiZml0bmVzc0xldmVsRmFjdG9yIiwiZml0bmVzc0xldmVsIiwidXBkYXRlRml0bmVzc0xldmVsIiwidXNlcklkIiwiY3VycmVudEZpdG5lc3NMZXZlbCIsImZpdG5lc3NMZXZlbEluY3JlYXNlIiwiZGIiLCJtaW4iLCJsYXN0VXBkYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsImZpcmViYXNlQ29uZmlnIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwibG9nIiwiYXBwIiwiYXBwcyIsImxlbmd0aCIsImF1dGgiLCJhdXRoSW5pdGlhbGl6ZWQiLCJkYkluaXRpYWxpemVkIiwicmVnaXN0ZXJVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImRpc3BsYXlOYW1lIiwicHJvZmlsZURhdGEiLCJ1c2VyQ3JlZGVudGlhbCIsInVzZXIiLCJ1aWQiLCJ1c2VyRGF0YSIsImNyZWF0ZWRBdCIsIndvcmtvdXRzIiwiY2Fsb3JpZU11bHRpcGxpZXIiLCJsYXN0Q2Fsb3JpZUZhY3RvclVwZGF0ZSIsInVzZXJQcm9maWxlRGF0YSIsInVwZGF0ZWRBdCIsIm5pY2tuYW1lIiwidXNlclJlZiIsInVzZXJQcm9maWxlUmVmIiwiUHJvbWlzZSIsImFsbCIsImZpcmVzdG9yZUVycm9yIiwid2FybmluZyIsImxvZ2luVXNlciIsImxvZ291dFVzZXIiLCJzYXZlVXNlclByb2ZpbGUiLCJkYXRhIiwibWVyZ2UiLCJnZXRVc2VyUHJvZmlsZSIsInByb2ZpbGVEb2MiLCJleGlzdHMiLCJjb25zb2xlIiwidXBkYXRlVXNlclByb2ZpbGUiLCJwcm9maWxlVXBkYXRlcyIsInVzZXJQcm9maWxlRG9jIiwidXNlclByb2ZpbGUiLCJ1cGRhdGVkUHJvZmlsZSIsIkVycm9yIiwidXNlQXV0aCIsInNldFVzZXIiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInVuc3Vic2NyaWJlIiwiY3VycmVudFVzZXIiLCJzYXZlV29ya291dFRvRmlyZXN0b3JlIiwiZGF0ZSIsInJlc3VsdHMiLCJzdW1tYXJ5RGF0YSIsInJlc3VsdHNDb3VudCIsIkFycmF5IiwiaXNBcnJheSIsInRlc3RSZWYiLCJ0aW1lc3RhbXAiLCJjb25uRXJyb3IiLCJwcm9maWxlUmVzdWx0IiwicmVzdWx0c1dpdGhDYWxvcmllcyIsIm1hcCIsInJlc3VsdCIsImNhbG9yaWVzQnVybmVkIiwicm91bmQiLCJ3b3Jrb3V0SWQiLCJub3ciLCJ3b3Jrb3V0RGF0YSIsImxhc3RVcGRhdGVkIiwic3VtbWFyeSIsInRvdGFsQ2Fsb3JpZXNCdXJuZWQiLCJkdXJhdGlvblNlY29uZHMiLCJkdXJhdGlvbkZvcm1hdHRlZCIsImZvcm1hdER1cmF0aW9uIiwid29ya291dFJlZiIsImZ1bGxXb3Jrb3V0RGF0YSIsInVzZXJXb3Jrb3V0UmVmIiwiZml0bmVzc0Vycm9yIiwid2FybiIsImRpcmVjdFNhdmVFcnJvciIsInJldHJpZXMiLCJtYXhSZXRyaWVzIiwidXNlckRvYyIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3JlYXRlRXJyb3IiLCJleGlzdGluZ1dvcmtvdXRJbmRleCIsImZpbmRJbmRleCIsInciLCJwdXNoIiwidXBkYXRlRXJyb3IiLCJ2ZXJpZnlEb2MiLCJ2ZXJpZnlEYXRhIiwiZXhpc3RpbmciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYmFja3VwRGF0YSIsIkpTT04iLCJwYXJzZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJmYWxsYmFja1VzZWQiLCJmYWxsYmFja0Vycm9yIiwic2Vjb25kcyIsIm1pbnV0ZXMiLCJmbG9vciIsInJlbWFpbmluZ1NlY29uZHMiLCJnZXRVc2VyV29ya291dHMiLCJhbGxXb3Jrb3V0cyIsImVycm9ycyIsInEiLCJ3b3Jrb3V0c1NuYXBzaG90IiwiZW1wdHkiLCJkaXJlY3RXb3Jrb3V0cyIsImRvY3MiLCJkaXJlY3RFcnJvciIsInVzZXJXb3Jrb3V0c1JlZiIsInVzZXJXb3Jrb3V0c1NuYXBzaG90Iiwic3ViY29sbGVjdGlvbldvcmtvdXRzIiwibmV3V29ya291dHMiLCJmaWx0ZXIiLCJuZXdXb3Jrb3V0Iiwic29tZSIsInN1YmNvbGxlY3Rpb25FcnJvciIsInVzZXJEb2NFcnJvciIsIndvcmtvdXRCYWNrdXBzIiwidXNlckJhY2t1cHMiLCJ3b3Jrb3V0Iiwid2FybmluZ3MiLCJiYWNrdXBFcnJvciIsImRldGFpbHMiLCJzb3J0ZWRXb3Jrb3V0cyIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJqb2luIiwidW5kZWZpbmVkIiwicGFyc2VkQmFja3VwIiwiaXRlbSIsInVzaW5nQmFja3VwIiwicGFyc2VkV29ya291dEJhY2t1cHMiLCJjYWxjdWxhdGVDYWxvcmllc0J1cm5lZCIsImV4ZXJjaXNlVHlwZSIsInJlcHMiLCJ1c2VyV2VpZ2h0IiwiY2Fsb3JpZXNQZXJSZXBCYXNlIiwiY2Fsb3JpZXNQZXJSZXAiLCJ3ZWlnaHRGYWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lib/firebase.ts\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/AuthContext */ \"./src/lib/AuthContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_AuthContext__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nfunction App({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_lib_AuthContext__WEBPACK_IMPORTED_MODULE_2__.AuthProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n            ...pageProps\n        }, void 0, false, {\n            fileName: \"D:\\\\Fitness App\\\\WEB APP\\\\src\\\\pages\\\\_app.tsx\",\n            lineNumber: 8,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"D:\\\\Fitness App\\\\WEB APP\\\\src\\\\pages\\\\_app.tsx\",\n        lineNumber: 7,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2FwcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUVtQjtBQUVsQyxTQUFTQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFZO0lBQzVELHFCQUNFLDhEQUFDSCwwREFBWUE7a0JBQ1gsNEVBQUNFO1lBQVcsR0FBR0MsU0FBUzs7Ozs7Ozs7Ozs7QUFHOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXRuZXNzLXdlYi1hcHAvLi9zcmMvcGFnZXMvX2FwcC50c3g/ZjlkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ0Avc3R5bGVzL2dsb2JhbHMuY3NzJztcclxuaW1wb3J0IHR5cGUgeyBBcHBQcm9wcyB9IGZyb20gJ25leHQvYXBwJztcclxuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnQC9saWIvQXV0aENvbnRleHQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfTogQXBwUHJvcHMpIHtcclxuICByZXR1cm4gKFxyXG4gICAgPEF1dGhQcm92aWRlcj5cclxuICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxyXG4gICAgPC9BdXRoUHJvdmlkZXI+XHJcbiAgKTtcclxufSAiXSwibmFtZXMiOlsiQXV0aFByb3ZpZGVyIiwiQXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/firestore");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./src/pages/_app.tsx"));
module.exports = __webpack_exports__;

})();